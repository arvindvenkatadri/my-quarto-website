{
  "hash": "bb9867cb320daa3b568d037d3a87f132",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: 'The Grammar of Networks '\nsubtitle: \"Visualizing and Manipulating Network data in R\"\nauthor: \"Arvind V.\"\ndate: 21/June/2022\ndate-modified: \"2025-07-17\"\nabstract-title: \"Abstract\"\nabstract: \"Visualizing and Manipulating Network data in R\"\nbibliography: \n  - grateful-refs.bib\ncitation: true\n#suppress-bibliography: true\n\n---\n\n## {{< iconify noto-v1 package >}} Setting up R Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Fonts\n# Run these next few commands IN YOUR CONSOLE once.\n# install.packages(\"extrafontdb\")\n# library(extrafont)\n# extrafont::font_import(paths = NULL, recursive = TRUE, prompt = TRUE,pattern = NULL)\n\n########################################\n# For General Data Manipulation\nlibrary(tidyverse)\n\n########################################\n# Network Analysis Library (Handle data and Viz)\nlibrary(igraph)\n\n########################################\n# For Network \"Manipulation\"\nlibrary(tidygraph)\n\n# For Network Visualization\nlibrary(ggraph)\nlibrary(graphlayouts)\nlibrary(visNetwork)\n\n# For \"Network\" Datasets\nlibrary(igraphdata)\n\n# Fonts\nlibrary(ggtext) # Claus Wilke's package\nlibrary(showtext)\nlibrary(fontawesome)\n# For repeatable layouts, some can be random!!\nset.seed(12345)\n```\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n## {{< iconify openmoji japanese-symbol-for-beginner >}} Introduction\n\nNetwork graphs show relationships between entities: what sort they are,\nhow strong they are, and even of they change over time.\n\nWe will examine data structures pertaining both to the *entities* and\nthe *relationships* between them and look at the data *object* that can\ncombine these aspects together. Then we will see how these are plotted,\nwhat the *structure* of the plot looks like. There are also *metrics*\nthat we can calculate for the network, based on its structure. We will\nof course examine geometric metaphors that can represent various classes\nof entities and their relationships.\n\nNetwork graphs can be rendered both as static and interactive and we\nwill examine R packages that render both kinds of plots.\n\nThere is a another kind of structure: one that combines *spatial* and\n*network* data in one. We will defer that for a future module !\n\n{{< video https://youtu.be/DrhhdekP1ZQ >}}\n\n## What kind Network graphs will we make?\n\nHere is a network map of the characters in Victor Hugo's\n`Les Miserables`:\n\n<iframe width=\"100%\" height=\"676\" frameborder=\"0\" src=\"https://observablehq.com/embed/@d3/force-directed-graph-canvas?cells=chart\">\n\n</iframe>\n\nAnd this: the well known [Zachary's Karate Club\ndataset](https://en.wikipedia.org/wiki/Zachary%27s_karate_club)\nvisualized as a network\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](GoN_files/figure-html/unnamed-chunk-1-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n## {{< iconify game-icons stairs-goal >}} Goals\n\nAt the end of this Lab session, we should:\n\n-   know the types and structures of `network data` and be able to work\n    with them\n-   understand the basics of modern network packages in R\n-   be able to create network visualizations using `tidygraph`,\n    `ggraph`( static visualizations ) and `visNetwork` (interactive\n    visualizations)\n-   see directions for how the network metaphor applies in a variety of\n    domains (e.g. biology/ecology, ideas/influence, technology,\n    transportation, to name a few)\n\n## {{< iconify game-icons journey >}} Pedagogical Note\n\nThe method followed will be based on\n[PRIMM](https://blogs.kcl.ac.uk/cser/2017/09/01/primm-a-structured-approach-to-teaching-programming/):\n\n-   **PREDICT** Inspect the code and guess at what the code might do,\n    **write predictions**\n-   **RUN** the code provided and check what happens\n-   **INFER** what the `parameters` of the code do and **write comments\n    to explain**. What bells and whistles can you see?\n-   **MODIFY** the `parameters` code provided to understand the\n    `options` available. **Write comments** to show what you have aimed\n    for and achieved.\n-   **MAKE** : take an idea/concept of your own, and graph it.\n\n## {{< iconify cib graphql >}} Graph Metaphors\n\nNetwork graphs are characterized by two key terms: **nodes** and\n**edges**\n\n1.  `Nodes` : **Entities**\n\n    -   Metaphors: Individual People? Things? Ideas? Places? to be\n        connected in the network.\n    -   Synonyms: `vertices`. Nodes have `IDs`.\n\n2.  `Edges`: **Connections**\n\n    -   Metaphors: Interactions? Relationships? Influence? Letters sent\n        and received? Dependence? between the entities.\n    -   Synonyms: `links`, `ties`.\n\nIn R, we create network representations using node and edge information.\n*One way* in which these could be organized are:\n\n-   `Node list`: a data frame with a single column listing the node IDs\n    found in the edge list. You can also add **attribute columns** to\n    the data frame such as the names of the nodes or grouping variables.\n    ( Type? Class? Family? Country? Subject? Race? )\n\n|     |            |                                                          |\n|------------|------------|------------------------------------------------|\n| ID  | Node Name  | Attribute? Qualities?Categories? Family? Country?Planet? |\n| 1   | Ned        | Nursery School Teacher                                   |\n| 2   | Jaguar Paw | Main Character, Apocalypto                               |\n| 3   | John Snow  | Epidemiologist                                           |\n\n: Node Table\n\n-   `Edge list`: data frame containing two columns: **source node** and\n    **destination node** of an `edge`. Source and Destination have\n    `node IDs`.\n-   `Weighted network graph`: An edge list can also contain additional\n    columns describing attributes of the edges such as a magnitude\n    aspect for an edge. If the edges have a magnitude attribute the\n    graph is considered weighted.\n\n| From | To  | Relationship       | Weightage |\n|------|-----|--------------------|-----------|\n| 1    | 3   | Financial Dealings | 6         |\n| 2    | 1   | History Lessons    | 2         |\n| 2    | 3   | Vaccination        | 15        |\n\n: Edges Table\n\n-   `Layout`: A **geometric** arrangement of `nodes` and `edges`.\n\n    -   Metaphors: Location? Spacing? Distance? Coordinates? Colour?\n        Shape? Size? Provides visual insight due to the `arrangement`.\n\n-   `Layout Algorithms` : `Method` to arranges `nodes` and `edges` with\n    the aim of optimizing some `metric` .\n\n    -   Metaphors: Nodes are `masses` and edges are `springs`. The\n        Layout algorithm minimizes the stretching and compressing of all\n        springs.(BTW, are the Spring Constants K the same for all\n        springs?...)\n\n-   `Directed and undirected network graph`: If the distinction between\n    source and target is meaningful, the network is **directed.** If the\n    distinction is not meaningful, the network is **undirected**.\n    **Directed edges** represent an ordering of nodes, like a\n    relationship extending from one node to another, where switching the\n    direction would change the structure of the network. **Undirected\n    edges** are simply links between nodes where order does not matter.\n\n::: callout-tip\n## Examples\n\n-   The World Wide Web is an example of a directed network because\n    hyperlinks connect one Web page to another, but not necessarily the\n    other way around.\n\n-   Co-authorship networks represent examples of un-directed networks,\n    where nodes are authors and they are connected by an edge if they\n    have written a publication together\n\n-   When people send e-mail to each other, the distinction between the\n    sender (source) and the recipient (target) is clearly meaningful,\n    therefore the network is directed.\n:::\n\n-   `Connected` and `Disconnected` graphs: If there is *some* path from\n    *any node* to *any other node*, the Networks is said to be\n    Connected. Else, Disconnected.\n\n## Predict/Run/Infer-1\n\n### Using `tidygraph` and `ggraph`\n\n`tidygraph` and `ggraph` are modern R packages for network data. Graph\nData setup and manipulation is done in tidygraph and graph visualization\nwith ggraph.\n\n-   `tidygraph` Data -> \"Network Object\" in R.\n-   `ggraph` Network Object -> Plots using a chosen layout/algo.\n\nBoth leverage the power of **`igraph`**, which is the **Big Daddy** of\nall network packages. We will be using the Grey's Anatomy dataset in our\nfirst foray into networks.\n\n### Step1. Read the data\n\nDownload these two datasets into your current project-\\> data folder.\n\n{{< downloadthis \"data/grey_nodes.csv\" dname=\"grey_nodes\" label=\"Grey’s Anatomy Nodes\" icon=\"database-fill-down\" type=\"info\" >}}\n\n{{< downloadthis \"data/grey_edges.csv\" dname=\"grey_edges\" label=\"Grey’s Anatomy Edges\" icon=\"database-fill-down\" type=\"info\" >}}\n\n\n::: {.cell .column-body-outset-right layout-nrow=\"2\" layout-align=\"center\"}\n\n```{.r .cell-code}\ngrey_nodes <- read_csv(\"data/grey_nodes.csv\")\ngrey_edges <- read_csv(\"data/grey_edges.csv\")\n\ngrey_nodes\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"name\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"sex\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"race\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"birthyear\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"position\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"season\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"sign\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Addison Montgomery\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1967\",\"5\":\"Attending\",\"6\":\"1\",\"7\":\"Libra\"},{\"1\":\"Adele Webber\",\"2\":\"F\",\"3\":\"Black\",\"4\":\"1949\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Leo\"},{\"1\":\"Teddy Altman\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1969\",\"5\":\"Attending\",\"6\":\"6\",\"7\":\"Pisces\"},{\"1\":\"Amelia Shepherd\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1981\",\"5\":\"Attending\",\"6\":\"7\",\"7\":\"Libra\"},{\"1\":\"Arizona Robbins\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1976\",\"5\":\"Attending\",\"6\":\"5\",\"7\":\"Leo\"},{\"1\":\"Rebecca Pope\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1975\",\"5\":\"Non-Staff\",\"6\":\"3\",\"7\":\"Gemini\"},{\"1\":\"Jackson Avery\",\"2\":\"M\",\"3\":\"Black\",\"4\":\"1981\",\"5\":\"Resident\",\"6\":\"6\",\"7\":\"Leo\"},{\"1\":\"Miranda Bailey\",\"2\":\"F\",\"3\":\"Black\",\"4\":\"1969\",\"5\":\"Attending\",\"6\":\"1\",\"7\":\"Virgo\"},{\"1\":\"Ben Warren\",\"2\":\"M\",\"3\":\"Black\",\"4\":\"1972\",\"5\":\"Other\",\"6\":\"6\",\"7\":\"Aquarius\"},{\"1\":\"Henry Burton\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1972\",\"5\":\"Non-Staff\",\"6\":\"7\",\"7\":\"Cancer\"},{\"1\":\"Catherine Avery\",\"2\":\"F\",\"3\":\"Other\",\"4\":\"1950\",\"5\":\"Attending\",\"6\":\"8\",\"7\":\"Capricorn\"},{\"1\":\"Colin Marlow\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1944\",\"5\":\"Attending\",\"6\":\"3\",\"7\":\"Taurus\"},{\"1\":\"Denny Duqutte\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1966\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Taurus\"},{\"1\":\"Derek Sheperd\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1966\",\"5\":\"Attending\",\"6\":\"1\",\"7\":\"Capricorn\"},{\"1\":\"Ellis Grey\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1957\",\"5\":\"Attending\",\"6\":\"1\",\"7\":\"Virgo\"},{\"1\":\"Finn Dandridge\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1970\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Cancer\"},{\"1\":\"Meredith Grey\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1969\",\"5\":\"Resident\",\"6\":\"1\",\"7\":\"Scorpio\"},{\"1\":\"Erica Hahn\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1967\",\"5\":\"Attending\",\"6\":\"2\",\"7\":\"Gemini\"},{\"1\":\"Hank\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1975\",\"5\":\"Non-Staff\",\"6\":\"1\",\"7\":\"Sagittarius\"},{\"1\":\"Izzie Stevens\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1978\",\"5\":\"Resident\",\"6\":\"1\",\"7\":\"Sagittarius\"},{\"1\":\"Alex Karev\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1970\",\"5\":\"Resident\",\"6\":\"1\",\"7\":\"Cancer\"},{\"1\":\"April Kepner\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1980\",\"5\":\"Resident\",\"6\":\"6\",\"7\":\"Libra\"},{\"1\":\"Lexie Grey\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1982\",\"5\":\"Resident\",\"6\":\"3\",\"7\":\"Aries\"},{\"1\":\"Lloyd\",\"2\":\"M\",\"3\":\"Black\",\"4\":\"1971\",\"5\":\"Nurse\",\"6\":\"7\",\"7\":\"Capricorn\"},{\"1\":\"Lucy Fields\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1984\",\"5\":\"Attending\",\"6\":\"7\",\"7\":\"Cancer\"},{\"1\":\"Megan Nowland\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1979\",\"5\":\"Intern\",\"6\":\"4\",\"7\":\"NA\"},{\"1\":\"Steve Mostow\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1985\",\"5\":\"Intern\",\"6\":\"4\",\"7\":\"Gemini\"},{\"1\":\"Dana Seabury\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1952\",\"5\":\"Non-Staff\",\"6\":\"3\",\"7\":\"Leo\"},{\"1\":\"Nancy Shepard\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1965\",\"5\":\"Non-Staff\",\"6\":\"3\",\"7\":\"Leo\"},{\"1\":\"Nurse Olivia\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1982\",\"5\":\"Nurse\",\"6\":\"1\",\"7\":\"Capricorn\"},{\"1\":\"George O'Malley\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1973\",\"5\":\"Resident\",\"6\":\"1\",\"7\":\"Aries\"},{\"1\":\"Owen Hunt\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1973\",\"5\":\"Chief\",\"6\":\"5\",\"7\":\"Leo\"},{\"1\":\"Andrew Perkins\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1965\",\"5\":\"Other\",\"6\":\"7\",\"7\":\"Leo\"},{\"1\":\"Pierce Halley\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1986\",\"5\":\"Intern\",\"6\":\"4\",\"7\":\"NA\"},{\"1\":\"Preston Burke\",\"2\":\"M\",\"3\":\"Black\",\"4\":\"1963\",\"5\":\"Attending\",\"6\":\"1\",\"7\":\"Leo\"},{\"1\":\"Reed Adamson\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1981\",\"5\":\"Resident\",\"6\":\"6\",\"7\":\"Aquarius\"},{\"1\":\"Mark Sloan\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1972\",\"5\":\"Attending\",\"6\":\"2\",\"7\":\"Scorpio\"},{\"1\":\"Steve Murphy\",\"2\":\"M\",\"3\":\"Other\",\"4\":\"1984\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Gemini\"},{\"1\":\"Susan Grey\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1959\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Taurus\"},{\"1\":\"Thatcher Grey\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1955\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Leo\"},{\"1\":\"Callie Torres\",\"2\":\"F\",\"3\":\"Other\",\"4\":\"1975\",\"5\":\"Attending\",\"6\":\"2\",\"7\":\"Virgo\"},{\"1\":\"Tucker Jones\",\"2\":\"M\",\"3\":\"Black\",\"4\":\"1970\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Leo\"},{\"1\":\"Cristina Yang\",\"2\":\"F\",\"3\":\"Other\",\"4\":\"1971\",\"5\":\"Resident\",\"6\":\"1\",\"7\":\"Cancer\"},{\"1\":\"Heather Brooks\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1985\",\"5\":\"NA\",\"6\":\"9\",\"7\":\"NA\"},{\"1\":\"Jo Wilson\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1983\",\"5\":\"Resident\",\"6\":\"9\",\"7\":\"NA\"},{\"1\":\"Lauren Boswell\",\"2\":\"F\",\"3\":\"White\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"9\",\"7\":\"NA\"},{\"1\":\"Leah Murphy\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1987\",\"5\":\"NA\",\"6\":\"9\",\"7\":\"NA\"},{\"1\":\"Eli James\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Emma\",\"2\":\"F\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Stephanie Edwards\",\"2\":\"F\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Shane Ross\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Richard Webber\",\"2\":\"M\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Rose\",\"2\":\"F\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Nathan Riggs\",\"2\":\"M\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\ngrey_edges\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"from\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"to\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"weight\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"type\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Leah Murphy\",\"2\":\"Arizona Robbins\",\"3\":\"2\",\"4\":\"friends\"},{\"1\":\"Leah Murphy\",\"2\":\"Alex Karev\",\"3\":\"4\",\"4\":\"benefits\"},{\"1\":\"Lauren Boswell\",\"2\":\"Arizona Robbins\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Arizona Robbins\",\"2\":\"Callie Torres\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Callie Torres\",\"2\":\"Erica Hahn\",\"3\":\"6\",\"4\":\"friends\"},{\"1\":\"Callie Torres\",\"2\":\"Alex Karev\",\"3\":\"12\",\"4\":\"benefits\"},{\"1\":\"Callie Torres\",\"2\":\"Mark Sloan\",\"3\":\"5\",\"4\":\"professional\"},{\"1\":\"Callie Torres\",\"2\":\"George O'Malley\",\"3\":\"2\",\"4\":\"professional\"},{\"1\":\"George O'Malley\",\"2\":\"Izzie Stevens\",\"3\":\"3\",\"4\":\"professional\"},{\"1\":\"George O'Malley\",\"2\":\"Meredith Grey\",\"3\":\"4\",\"4\":\"friends\"},{\"1\":\"Denny Duqutte\",\"2\":\"Izzie Stevens\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Izzie Stevens\",\"2\":\"Alex Karev\",\"3\":\"7\",\"4\":\"professional\"},{\"1\":\"Meredith Grey\",\"2\":\"Derek Sheperd\",\"3\":\"3\",\"4\":\"friends\"},{\"1\":\"Preston Burke\",\"2\":\"Cristina Yang\",\"3\":\"4\",\"4\":\"friends\"},{\"1\":\"Shane Ross\",\"2\":\"Cristina Yang\",\"3\":\"6\",\"4\":\"professional\"},{\"1\":\"Derek Sheperd\",\"2\":\"Rose\",\"3\":\"2\",\"4\":\"friends\"},{\"1\":\"Derek Sheperd\",\"2\":\"Addison Montgomery\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Cristina Yang\",\"2\":\"Owen Hunt\",\"3\":\"1\",\"4\":\"benefits\"},{\"1\":\"Amelia Shepherd\",\"2\":\"Owen Hunt\",\"3\":\"1\",\"4\":\"benefits\"},{\"1\":\"Amelia Shepherd\",\"2\":\"Mark Sloan\",\"3\":\"1\",\"4\":\"professional\"},{\"1\":\"Addison Montgomery\",\"2\":\"Mark Sloan\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Stephanie Edwards\",\"2\":\"Jackson Avery\",\"3\":\"2\",\"4\":\"benefits\"},{\"1\":\"Jackson Avery\",\"2\":\"April Kepner\",\"3\":\"3\",\"4\":\"benefits\"},{\"1\":\"Jackson Avery\",\"2\":\"Lexie Grey\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Reed Adamson\",\"2\":\"Mark Sloan\",\"3\":\"5\",\"4\":\"professional\"},{\"1\":\"Mark Sloan\",\"2\":\"Lexie Grey\",\"3\":\"5\",\"4\":\"professional\"},{\"1\":\"Mark Sloan\",\"2\":\"Teddy Altman\",\"3\":\"7\",\"4\":\"friends\"},{\"1\":\"Lexie Grey\",\"2\":\"Alex Karev\",\"3\":\"12\",\"4\":\"friends\"},{\"1\":\"Alex Karev\",\"2\":\"Heather Brooks\",\"3\":\"2\",\"4\":\"benefits\"},{\"1\":\"Alex Karev\",\"2\":\"Jo Wilson\",\"3\":\"3\",\"4\":\"competition\"},{\"1\":\"Teddy Altman\",\"2\":\"Henry Burton\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Owen Hunt\",\"2\":\"Emma\",\"3\":\"1\",\"4\":\"competition\"},{\"1\":\"Addison Montgomery\",\"2\":\"Alex Karev\",\"3\":\"8\",\"4\":\"friends\"},{\"1\":\"Alex Karev\",\"2\":\"Rebecca Pope\",\"3\":\"1\",\"4\":\"competition\"},{\"1\":\"Alex Karev\",\"2\":\"Lucy Fields\",\"3\":\"9\",\"4\":\"competition\"},{\"1\":\"George O'Malley\",\"2\":\"Nurse Olivia\",\"3\":\"2\",\"4\":\"professional\"},{\"1\":\"Nurse Olivia\",\"2\":\"Alex Karev\",\"3\":\"5\",\"4\":\"professional\"},{\"1\":\"Hank\",\"2\":\"Izzie Stevens\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Andrew Perkins\",\"2\":\"Teddy Altman\",\"3\":\"1\",\"4\":\"competition\"},{\"1\":\"Mark Sloan\",\"2\":\"Nancy Shepard\",\"3\":\"2\",\"4\":\"professional\"},{\"1\":\"Meredith Grey\",\"2\":\"Nathan Riggs\",\"3\":\"3\",\"4\":\"benefits\"},{\"1\":\"Ben Warren\",\"2\":\"Miranda Bailey\",\"3\":\"4\",\"4\":\"benefits\"},{\"1\":\"Miranda Bailey\",\"2\":\"Eli James\",\"3\":\"2\",\"4\":\"professional\"},{\"1\":\"Miranda Bailey\",\"2\":\"Tucker Jones\",\"3\":\"3\",\"4\":\"friends\"},{\"1\":\"Ellis Grey\",\"2\":\"Richard Webber\",\"3\":\"6\",\"4\":\"competition\"},{\"1\":\"Ellis Grey\",\"2\":\"Thatcher Grey\",\"3\":\"1\",\"4\":\"professional\"},{\"1\":\"Richard Webber\",\"2\":\"Catherine Avery\",\"3\":\"1\",\"4\":\"benefits\"},{\"1\":\"Susan Grey\",\"2\":\"Thatcher Grey\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Richard Webber\",\"2\":\"Adele Webber\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Steve Mostow\",\"2\":\"Megan Nowland\",\"3\":\"3\",\"4\":\"competition\"},{\"1\":\"Megan Nowland\",\"2\":\"Pierce Halley\",\"3\":\"4\",\"4\":\"competition\"},{\"1\":\"Steve Murphy\",\"2\":\"Meredith Grey\",\"3\":\"7\",\"4\":\"friends\"},{\"1\":\"Meredith Grey\",\"2\":\"Finn Dandridge\",\"3\":\"1\",\"4\":\"benefits\"},{\"1\":\"Teddy Altman\",\"2\":\"Owen Hunt\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Miranda Bailey\",\"2\":\"Lloyd\",\"3\":\"1\",\"4\":\"professional\"},{\"1\":\"Colin Marlow\",\"2\":\"Cristina Yang\",\"3\":\"1\",\"4\":\"professional\"},{\"1\":\"Dana Seabury\",\"2\":\"Alex Karev\",\"3\":\"12\",\"4\":\"benefits\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #1\n\nLook at the output thumbnails. What attributes (i.e. extra information)\nare seen for Nodes and Edges?\n:::\n\n### Step 2.Create a network object using tidygraph:\n\nKey function:\n\n-   `tbl_graph()`: (aka \"tibble graph\"). Key arguments: `nodes`, `edges`\n    and `directed`. Note this is a very versatile command and can take\n    many input forms, such as data structures that result from other\n    packages. Type `?tbl_graph` in the Console and see the `Usage`\n    section.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nga <- tbl_graph(\n  nodes = grey_nodes,\n  edges = grey_edges,\n  directed = FALSE\n)\nga\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tbl_graph: 54 nodes and 57 edges\n#\n# An undirected simple graph with 4 components\n#\n# Node Data: 54 × 7 (active)\n   name               sex   race  birthyear position  season sign    \n   <chr>              <chr> <chr>     <dbl> <chr>      <dbl> <chr>   \n 1 Addison Montgomery F     White      1967 Attending      1 Libra   \n 2 Adele Webber       F     Black      1949 Non-Staff      2 Leo     \n 3 Teddy Altman       F     White      1969 Attending      6 Pisces  \n 4 Amelia Shepherd    F     White      1981 Attending      7 Libra   \n 5 Arizona Robbins    F     White      1976 Attending      5 Leo     \n 6 Rebecca Pope       F     White      1975 Non-Staff      3 Gemini  \n 7 Jackson Avery      M     Black      1981 Resident       6 Leo     \n 8 Miranda Bailey     F     Black      1969 Attending      1 Virgo   \n 9 Ben Warren         M     Black      1972 Other          6 Aquarius\n10 Henry Burton       M     White      1972 Non-Staff      7 Cancer  \n# ℹ 44 more rows\n#\n# Edge Data: 57 × 4\n   from    to weight type    \n  <int> <int>  <dbl> <chr>   \n1     5    47      2 friends \n2    21    47      4 benefits\n3     5    46      1 friends \n# ℹ 54 more rows\n```\n\n\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #2\n\nWhat information does the graph object contain? What attributes do the\nnodes have? What about the edges?\n:::\n\n### Step 3. Plot using `ggraph`\n\n3a. Quick Plot: `autograph()` This is to check quickly is the data is\nimported properly and to decide upon going on to a more elaborate\nplotting.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nautograph(ga)\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/3a.Auto-graph-grey-anatomy-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #3\n\nDescribe this graph, in simple words here. Try to use some of the new\ndomain words we have just acquired: nodes/edges, connected/disconnected,\ndirected/undirected.\n:::\n\n3b. More elaborate plot\n\nKey functions:\n\n-   `ggraph(layout = \"......\")`: Create classic node-edge diagrams; i.e.\n    Sets up the graph. Rather like `ggplot` for networks!\n\nTwo kinds of `geom`: one set for nodes, and another for edges\n\n-   `geom_node_point(aes(.....))`: Draws node as \"points\". Alternatives\n    are `circle / arc_bar / tile / voronoi`. Remember the `geom`s that\n    we have seen before in Grammar of Graphics!\n\n-   `geom_edge_link0(aes(.....))`: Draws edges as \"links\". Alternatives\n    are\n    `arc / bend / elbow / hive / loop / parallel / diagonal / point / span /tile`.\n\n-   `geom_node_text(aes(label = ......), repel = TRUE)`: Adds text\n    labels (non-overlapping). Alternatives are `label /...`\n\n-   `labs(title = \"....\", subtitle = \"....\", caption = \"....\")`: Change\n    main titles, axis labels and legend titles. We know this from our\n    work with `ggplot`.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Write Comments next to each line\n# About what that line does for the overall graph\n\nggraph(graph = ga, layout = \"kk\") +\n  #\n  geom_edge_link0(width = 2, color = \"pink\") +\n  #\n  geom_node_point(\n    shape = 21, size = 8,\n    fill = \"blue\",\n    color = \"green\",\n    stroke = 2\n  ) +\n\n  labs(\n    title = \"Whoo Hoo! My First Silly Grey's Anatomy graph in R!\",\n    subtitle = \"Why did I ever get in this course...\",\n    caption = \"Bro, they are doing cool things in the other classes...\\n And the show is even more cool!\"\n  ) +\n\n  set_graph_style(family = \"Roboto\")\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/3b.Ggraph-greys-anatomy-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #4:\n\nWhat parameters have been changed here, compared to the earlier graph?\nWhere do you see these changes in the code above?\n:::\n\nLet us **Play** with this graph and see if we can make some small\nchanges. Colour? Fill? Width? Size? Stroke? Labs? Of course!\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Change the parameters in each of the commands here to new ones\n# Use fixed values for colours or sizes...etc.\n\nggraph(graph = ga, layout = \"kk\") +\n  geom_edge_link0(width = 2) +\n  geom_node_point(\n    shape = 21, size = 4,\n    fill = \"moccasin\",\n    color = \"firebrick\",\n    stroke = 2\n  ) +\n  labs(\n    title = \"Whoo Hoo! My next silly Grey's Anatomy graph in R!\",\n    subtitle = \"Why did I ever get in this course...\",\n    caption = \"Bro, they are doing cool things in the other classes...\"\n  ) +\n  set_graph_style(family = \"Roboto\")\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/3c.Modify-Greys-Anatomy-ggraph-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #5\n\nWhat did the `shape` parameter achieve? What are the possibilities with\n`shape`? How about including `alpha`?\n:::\n\n3c. Aesthetic Mapping from Node and Edge attribute columns\n\nUp to now, we have **assigned** *specific numbers* to geometric\naesthetics such as shape and size. Now we are ready ( maybe ?) change\nthe meaning and significance of the entire graph and each element within\nit, and use **aesthetics / metaphoric mappings** to achieve new meanings\nor insights. Let us try using `aes()` inside each `geom` to map a\n`variable` to a geometric aspect.\n\nDon't try to use more than 2 aesthetic mappings simultaneously!!\n\nThe node elements we can tweak are:\n\n-   Types of Nodes: `geom_node_****()`\\\n-   Node Parameters: inside `geom_node_****(aes(...............))`\\\n    -`aes(alpha  = node-variable)` : opacity; a value between 0 and 1\\\n    -`aes(shape  = node-variable)` : node shape\\\n    -`aes(colour = node-variable)` : node colour\\\n    -`aes(fill   = node-variable)` : fill colour for node\\\n    -`aes(size   = node-variable)` : size of node\n\nThe edge elements we can tweak are:\n\n-   Type of Edges\" `geom_edge_****()`\\\n-   Edge Parameters: inside `geom_edge_****(aes(...............))`\\\n    -`aes(colour = edge-variable)` : colour of the edge\\\n    -`aes(width  = edge-variable)` : width of the edge\\\n    -`aes(label  = some_variable)` : labels for the edge\n\nType `?geom_node_point` and `?geom-edge_link` in your Console for more\ninformation.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggraph(graph = ga, layout = \"fr\") +\n  geom_edge_link0(aes(width = weight)) + # change variable here\n\n  geom_node_point(aes(color = race), size = 6) + # change variable here\n\n  labs(\n    title = \"Whoo Hoo! Yet another Grey's Anatomy graph in R!\",\n    subtitle = \"Colouring Nodes by Attribute\",\n    caption = \"Grey's Anatomy\"\n  ) +\n\n  scale_edge_width(range = c(0.2, 2)) +\n  set_graph_style(family = \"roboto\")\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/3d.aesthetics-using-ggraph-Modify-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #6\n\nDescribe some of the changes here. What types of edges worked? Which\nvariables were you able to use for nodes and edges and how? What did not\nwork with either of the two?\n:::\n\n## Predict/Reuse/Infer-2\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Arc diagram\n\nggraph(ga, layout = \"linear\") +\n  geom_edge_arc0(aes(width = weight), alpha = 0.8) +\n  scale_edge_width(range = c(0.2, 2)) +\n  geom_node_point(size = 2, colour = \"red\") +\n  labs(edge_width = \"Weight\", title = \"Grey's Anatomy\", subtitle = \"Arc Layout\") +\n  set_graph_style(family = \"Roboto\")\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/arc-diagram-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #7\n\nHow does this graph look \"metaphorically\" different? Do you see a\ndifference in the relationships between people here? Why?\n:::\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Coord diagram, circular\nggraph(ga, layout = \"linear\", circular = TRUE) + # Note the layout!\n  geom_edge_arc0(aes(width = weight), alpha = 0.8) +\n  scale_edge_width(range = c(0.2, 2)) +\n\n  geom_node_point(size = 3, colour = \"red\") +\n  geom_node_text(aes(label = name),\n    repel = TRUE, size = 2, check_overlap = TRUE,\n    max.overlaps = 25\n  ) +\n  labs(edge_width = \"Weight\") +\n  theme(aspect.ratio = 1) +\n  set_graph_style(family = \"Roboto\")\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/Coord-Diagram-circular-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #8\n\nHow does this graph look \"metaphorically\" different? Do you see a\ndifference in the relationships between people here? Why?\n:::\n\n## Hierarchical layouts\n\nThese provide for some alternative metaphorical views of networks. Note\nthat not all layouts are possible for all datasets!!\n\n\n::: {.cell .column-body-outset-right layout-align=\"center\"}\n\n```{.r .cell-code}\n# set_graph_style()\n\n# This dataset contains the graph that describes the class\n# hierarchy for the Flare visualization library.\n# Type ?flare in your Console\nhead(flare$vertices)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"name\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"size\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"shortName\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"flare.analytics.cluster.AgglomerativeCluster\",\"2\":\"3938\",\"3\":\"AgglomerativeCluster\",\"_rn_\":\"1\"},{\"1\":\"flare.analytics.cluster.CommunityStructure\",\"2\":\"3812\",\"3\":\"CommunityStructure\",\"_rn_\":\"2\"},{\"1\":\"flare.analytics.cluster.HierarchicalCluster\",\"2\":\"6714\",\"3\":\"HierarchicalCluster\",\"_rn_\":\"3\"},{\"1\":\"flare.analytics.cluster.MergeEdge\",\"2\":\"743\",\"3\":\"MergeEdge\",\"_rn_\":\"4\"},{\"1\":\"flare.analytics.graph.BetweennessCentrality\",\"2\":\"3534\",\"3\":\"BetweennessCentrality\",\"_rn_\":\"5\"},{\"1\":\"flare.analytics.graph.LinkDistance\",\"2\":\"5731\",\"3\":\"LinkDistance\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nhead(flare$edges)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"from\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"to\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"flare.analytics.cluster\",\"2\":\"flare.analytics.cluster.AgglomerativeCluster\",\"_rn_\":\"1\"},{\"1\":\"flare.analytics.cluster\",\"2\":\"flare.analytics.cluster.CommunityStructure\",\"_rn_\":\"2\"},{\"1\":\"flare.analytics.cluster\",\"2\":\"flare.analytics.cluster.HierarchicalCluster\",\"_rn_\":\"3\"},{\"1\":\"flare.analytics.cluster\",\"2\":\"flare.analytics.cluster.MergeEdge\",\"_rn_\":\"4\"},{\"1\":\"flare.analytics.graph\",\"2\":\"flare.analytics.graph.BetweennessCentrality\",\"_rn_\":\"5\"},{\"1\":\"flare.analytics.graph\",\"2\":\"flare.analytics.graph.LinkDistance\",\"_rn_\":\"6\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n# flare class hierarchy\ngraph <- tbl_graph(edges = flare$edges, nodes = flare$vertices)\n```\n:::\n\n\n\n::: {.cell .column-body-outset-right layout-ncol=\"2\" layout-align=\"center\"}\n\n```{.r .cell-code}\n##\nset_graph_style(family = \"Roboto\")\n##\n\n# dendrogram\nggraph(graph, layout = \"dendrogram\") +\n  geom_edge_diagonal() +\n  labs(title = \"Dendrogram\")\n\n# circular dendrogram\nggraph(graph, layout = \"dendrogram\", circular = TRUE) +\n  geom_edge_diagonal0() +\n  geom_node_point(aes(filter = leaf)) +\n  coord_fixed() +\n  labs(title = \"Circular Dendrogram\")\n\n# rectangular tree map\nggraph(graph, layout = \"treemap\", weight = size) +\n  geom_node_tile(aes(fill = depth), size = 0.25) +\n  scale_fill_distiller(palette = \"Pastel1\") +\n  labs(title = \"Rectangular Tree Map\")\n\n\n# circular tree map\nggraph(graph, layout = \"circlepack\", weight = size) +\n  geom_node_circle(aes(fill = depth), size = 0.25, n = 50) +\n  scale_fill_distiller(palette = \"Accent\") +\n  coord_fixed() +\n  labs(title = \"Circular Tree Map\")\n\n\n# icicle\nggraph(graph, layout = \"partition\") +\n  geom_node_tile(aes(y = -y, fill = depth)) +\n  scale_fill_distiller(palette = \"Set3\") +\n  labs(title = \"Icicle Chart\")\n\n# sunburst (circular icicle)\nggraph(graph, layout = \"partition\", circular = TRUE) +\n  geom_node_arc_bar(aes(fill = depth)) +\n  scale_fill_distiller(palette = \"Spectral\") +\n  coord_fixed() +\n  labs(title = \"Circular Icicle\")\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/unnamed-chunk-2-1.png){fig-align='center' width=2100}\n:::\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/unnamed-chunk-2-2.png){fig-align='center' width=2100}\n:::\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/unnamed-chunk-2-3.png){fig-align='center' width=2100}\n:::\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/unnamed-chunk-2-4.png){fig-align='center' width=2100}\n:::\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/unnamed-chunk-2-5.png){fig-align='center' width=2100}\n:::\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/unnamed-chunk-2-6.png){fig-align='center' width=2100}\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #9 \n\nHow do graphs look \"metaphorically\" different? Do they reveal different\naspects of the group? How?\n:::\n\n## Faceting\n\nFaceting allows to create sub-plots according to the values of a\nqualitative attribute on nodes or edges.\n\n\n::: {.cell .column-body-outset-right layout-ncol=\"2\" layout-align=\"center\"}\n\n```{.r .cell-code}\n##\nset_graph_style(family = \"Roboto\", size = 8)\n##\n# facet edges by type\nggraph(ga, layout = \"linear\", circular = TRUE) +\n  geom_edge_link0(aes(color = type)) +\n  geom_node_point() +\n  facet_edges(~type) +\n  th_foreground(border = TRUE) +\n  theme(aspect.ratio = 1)\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/faceting-1.png){fig-align='center' width=2100}\n:::\n\n```{.r .cell-code}\n# facet nodes by sex\nggraph(ga, layout = \"linear\", circular = TRUE) +\n  geom_edge_link0() +\n  geom_node_point() +\n  facet_nodes(~race) +\n  th_foreground(border = TRUE) +\n  theme(aspect.ratio = 1)\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/faceting-2.png){fig-align='center' width=2100}\n:::\n\n```{.r .cell-code}\n# facet both nodes and edges\nggraph(ga, layout = \"linear\", circular = TRUE) +\n  geom_edge_link0(aes(color = type)) +\n  geom_node_point() +\n  facet_graph(type ~ race) +\n  th_foreground(border = TRUE) +\n  theme(aspect.ratio = 1, legend.position = \"right\")\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/faceting-3.png){fig-align='center' width=2100}\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #10 \n\nDoes splitting up the main graph into sub-networks give you more\ninsight? Describe some of these.\n:::\n\n## Network analysis with tidygraph\n\nThe data frame graph representation can be easily augmented with\n**metrics** or **statistics** computed on the graph. Remember how we\ncomputed `counts` with the penguin dataset in Grammar of Graphics.\n\nBefore computing a metric on nodes or edges use the `activate()`\nfunction to activate either node or edge data frames. Use `dplyr`\n**verbs** (`filter, arrange, mutate`) to achieve your computation in the\nproper way.\n\n### Network Centrality: Go-To and Go-Through People!\n\nCentrality is a an \"ill-defined\" metric of **node and edge importance**\nin a network. It is therefore calculated in many ways. Type\n`?centrality` in your Console.\n\n![Standards](https://imgs.xkcd.com/comics/standards.png){fig-align=\"center\"}\n\nLet's add a few columns to the nodes and edges based on network\ncentrality measures:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nga %>%\n  activate(nodes) %>%\n  # Node with  the most connections?\n  mutate(degree = centrality_degree(mode = c(\"in\"))) %>%\n  filter(degree > 0) %>%\n  activate(edges) %>%\n  # \"Busiest\" edge?\n  mutate(betweenness = centrality_edge_betweenness())\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tbl_graph: 54 nodes and 57 edges\n#\n# An undirected simple graph with 4 components\n#\n# Edge Data: 57 × 5 (active)\n    from    to weight type         betweenness\n   <int> <int>  <dbl> <chr>              <dbl>\n 1     5    47      2 friends             20.3\n 2    21    47      4 benefits            44.7\n 3     5    46      1 friends             39  \n 4     5    41      1 friends             66.3\n 5    18    41      6 friends             39  \n 6    21    41     12 benefits            91.5\n 7    37    41      5 professional       164. \n 8    31    41      2 professional        98.8\n 9    20    31      3 professional        47.2\n10    17    31      4 friends            102. \n# ℹ 47 more rows\n#\n# Node Data: 54 × 8\n  name               sex   race  birthyear position  season sign   degree\n  <chr>              <chr> <chr>     <dbl> <chr>      <dbl> <chr>   <dbl>\n1 Addison Montgomery F     White      1967 Attending      1 Libra       3\n2 Adele Webber       F     Black      1949 Non-Staff      2 Leo         1\n3 Teddy Altman       F     White      1969 Attending      6 Pisces      4\n# ℹ 51 more rows\n```\n\n\n:::\n:::\n\n\nPackages `tidygraph` and `ggraph` can be pipe-lined to perform analysis\nand visualization tasks in one go.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n##\nset_graph_style(family = \"Roboto\")\n##\nggraph(ga, layout = \"nicely\") +\n  geom_edge_link0(aes(alpha = centrality_edge_betweenness())) +\n\n  geom_node_point(aes(\n    colour = centrality_degree(),\n    size = centrality_degree()\n  )) +\n\n  geom_node_text(aes(label = name), repel = TRUE, size = 1.5) +\n\n  scale_size(name = \"Degree\", range = c(0.5, 5)) +\n\n  scale_color_gradient(\n    name = \"Degree\", # SAME NAME!!\n    low = \"blue\", high = \"red\",\n    aesthetics = c(\"colour\", \"fill\"),\n    guide = guide_legend(reverse = FALSE)\n  ) +\n\n  scale_edge_alpha(name = \"Betweenness\", range = c(0.05, 1)) +\n  labs(\n    title = \"Grey's Anatomy\",\n    subtitle = \"Nodes Scaled by Degree, Edges shaded by Betweenness\"\n  )\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/Using-Centrality-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #11 \n\nHow do the Centrality Measures show up in the graph? Would you \"agree\"\nwith the way we have done it? Try to modify the aesthetics by\ncopy-pasting this chunk below and see how you can make an alternative\nrepresentation.\n:::\n\n### Analysis and Visualizing Network Communities\n\nWho is close to whom? Which are the groups you can see?\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n##\nset_graph_style(family = \"Roboto\")\n##\n# visualize communities of nodes\nga %>%\n  activate(nodes) %>%\n  mutate(community = as.factor(group_louvain())) %>%\n  ggraph(layout = \"graphopt\") +\n  geom_edge_link0() +\n  geom_node_point(aes(color = community), size = 3) +\n  labs(title = \"Grey's Anatomy\", subtitle = \"Nodes Coloured by Community Detection Algorithm (Louvain)\")\n```\n\n::: {.cell-output-display}\n![](GoN_files/figure-html/communities in networks-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n::: callout-note\n## Questions and Inferences #12\n\nIs the Community depiction clear? How would you do it, with which\naesthetic? Copy Paste this chunk below and try.\n:::\n\n### Interactive Graphs with `visNetwork`\n\nExploring the `VisNetwork` package. Make graphs wiggle and shake using\n`tidy` commands! The package implements interactivity using the physical\nmetaphor of weights and springs we discussed earlier.\n\nThe `visNetwork()` function uses a nodes list and edges list to create\nan interactive graph. The nodes list must include an \"id\" column, and\nthe edge list must have \"from\" and \"to\" columns. The function also plots\nthe labels for the nodes, using the names of the cities from the \"label\"\ncolumn in the node list.\n\n\n::: {.cell layout-ncol=\"2\" layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(visNetwork)\n\n# Prepare the data for plotting by visNetwork\ngrey_nodes\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"name\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"sex\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"race\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"birthyear\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"position\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"season\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"sign\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Addison Montgomery\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1967\",\"5\":\"Attending\",\"6\":\"1\",\"7\":\"Libra\"},{\"1\":\"Adele Webber\",\"2\":\"F\",\"3\":\"Black\",\"4\":\"1949\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Leo\"},{\"1\":\"Teddy Altman\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1969\",\"5\":\"Attending\",\"6\":\"6\",\"7\":\"Pisces\"},{\"1\":\"Amelia Shepherd\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1981\",\"5\":\"Attending\",\"6\":\"7\",\"7\":\"Libra\"},{\"1\":\"Arizona Robbins\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1976\",\"5\":\"Attending\",\"6\":\"5\",\"7\":\"Leo\"},{\"1\":\"Rebecca Pope\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1975\",\"5\":\"Non-Staff\",\"6\":\"3\",\"7\":\"Gemini\"},{\"1\":\"Jackson Avery\",\"2\":\"M\",\"3\":\"Black\",\"4\":\"1981\",\"5\":\"Resident\",\"6\":\"6\",\"7\":\"Leo\"},{\"1\":\"Miranda Bailey\",\"2\":\"F\",\"3\":\"Black\",\"4\":\"1969\",\"5\":\"Attending\",\"6\":\"1\",\"7\":\"Virgo\"},{\"1\":\"Ben Warren\",\"2\":\"M\",\"3\":\"Black\",\"4\":\"1972\",\"5\":\"Other\",\"6\":\"6\",\"7\":\"Aquarius\"},{\"1\":\"Henry Burton\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1972\",\"5\":\"Non-Staff\",\"6\":\"7\",\"7\":\"Cancer\"},{\"1\":\"Catherine Avery\",\"2\":\"F\",\"3\":\"Other\",\"4\":\"1950\",\"5\":\"Attending\",\"6\":\"8\",\"7\":\"Capricorn\"},{\"1\":\"Colin Marlow\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1944\",\"5\":\"Attending\",\"6\":\"3\",\"7\":\"Taurus\"},{\"1\":\"Denny Duqutte\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1966\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Taurus\"},{\"1\":\"Derek Sheperd\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1966\",\"5\":\"Attending\",\"6\":\"1\",\"7\":\"Capricorn\"},{\"1\":\"Ellis Grey\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1957\",\"5\":\"Attending\",\"6\":\"1\",\"7\":\"Virgo\"},{\"1\":\"Finn Dandridge\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1970\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Cancer\"},{\"1\":\"Meredith Grey\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1969\",\"5\":\"Resident\",\"6\":\"1\",\"7\":\"Scorpio\"},{\"1\":\"Erica Hahn\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1967\",\"5\":\"Attending\",\"6\":\"2\",\"7\":\"Gemini\"},{\"1\":\"Hank\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1975\",\"5\":\"Non-Staff\",\"6\":\"1\",\"7\":\"Sagittarius\"},{\"1\":\"Izzie Stevens\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1978\",\"5\":\"Resident\",\"6\":\"1\",\"7\":\"Sagittarius\"},{\"1\":\"Alex Karev\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1970\",\"5\":\"Resident\",\"6\":\"1\",\"7\":\"Cancer\"},{\"1\":\"April Kepner\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1980\",\"5\":\"Resident\",\"6\":\"6\",\"7\":\"Libra\"},{\"1\":\"Lexie Grey\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1982\",\"5\":\"Resident\",\"6\":\"3\",\"7\":\"Aries\"},{\"1\":\"Lloyd\",\"2\":\"M\",\"3\":\"Black\",\"4\":\"1971\",\"5\":\"Nurse\",\"6\":\"7\",\"7\":\"Capricorn\"},{\"1\":\"Lucy Fields\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1984\",\"5\":\"Attending\",\"6\":\"7\",\"7\":\"Cancer\"},{\"1\":\"Megan Nowland\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1979\",\"5\":\"Intern\",\"6\":\"4\",\"7\":\"NA\"},{\"1\":\"Steve Mostow\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1985\",\"5\":\"Intern\",\"6\":\"4\",\"7\":\"Gemini\"},{\"1\":\"Dana Seabury\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1952\",\"5\":\"Non-Staff\",\"6\":\"3\",\"7\":\"Leo\"},{\"1\":\"Nancy Shepard\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1965\",\"5\":\"Non-Staff\",\"6\":\"3\",\"7\":\"Leo\"},{\"1\":\"Nurse Olivia\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1982\",\"5\":\"Nurse\",\"6\":\"1\",\"7\":\"Capricorn\"},{\"1\":\"George O'Malley\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1973\",\"5\":\"Resident\",\"6\":\"1\",\"7\":\"Aries\"},{\"1\":\"Owen Hunt\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1973\",\"5\":\"Chief\",\"6\":\"5\",\"7\":\"Leo\"},{\"1\":\"Andrew Perkins\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1965\",\"5\":\"Other\",\"6\":\"7\",\"7\":\"Leo\"},{\"1\":\"Pierce Halley\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1986\",\"5\":\"Intern\",\"6\":\"4\",\"7\":\"NA\"},{\"1\":\"Preston Burke\",\"2\":\"M\",\"3\":\"Black\",\"4\":\"1963\",\"5\":\"Attending\",\"6\":\"1\",\"7\":\"Leo\"},{\"1\":\"Reed Adamson\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1981\",\"5\":\"Resident\",\"6\":\"6\",\"7\":\"Aquarius\"},{\"1\":\"Mark Sloan\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1972\",\"5\":\"Attending\",\"6\":\"2\",\"7\":\"Scorpio\"},{\"1\":\"Steve Murphy\",\"2\":\"M\",\"3\":\"Other\",\"4\":\"1984\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Gemini\"},{\"1\":\"Susan Grey\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1959\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Taurus\"},{\"1\":\"Thatcher Grey\",\"2\":\"M\",\"3\":\"White\",\"4\":\"1955\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Leo\"},{\"1\":\"Callie Torres\",\"2\":\"F\",\"3\":\"Other\",\"4\":\"1975\",\"5\":\"Attending\",\"6\":\"2\",\"7\":\"Virgo\"},{\"1\":\"Tucker Jones\",\"2\":\"M\",\"3\":\"Black\",\"4\":\"1970\",\"5\":\"Non-Staff\",\"6\":\"2\",\"7\":\"Leo\"},{\"1\":\"Cristina Yang\",\"2\":\"F\",\"3\":\"Other\",\"4\":\"1971\",\"5\":\"Resident\",\"6\":\"1\",\"7\":\"Cancer\"},{\"1\":\"Heather Brooks\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1985\",\"5\":\"NA\",\"6\":\"9\",\"7\":\"NA\"},{\"1\":\"Jo Wilson\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1983\",\"5\":\"Resident\",\"6\":\"9\",\"7\":\"NA\"},{\"1\":\"Lauren Boswell\",\"2\":\"F\",\"3\":\"White\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"9\",\"7\":\"NA\"},{\"1\":\"Leah Murphy\",\"2\":\"F\",\"3\":\"White\",\"4\":\"1987\",\"5\":\"NA\",\"6\":\"9\",\"7\":\"NA\"},{\"1\":\"Eli James\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Emma\",\"2\":\"F\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Stephanie Edwards\",\"2\":\"F\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Shane Ross\",\"2\":\"NA\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Richard Webber\",\"2\":\"M\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Rose\",\"2\":\"F\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"},{\"1\":\"Nathan Riggs\",\"2\":\"M\",\"3\":\"NA\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\ngrey_edges\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"from\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"to\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"weight\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"type\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Leah Murphy\",\"2\":\"Arizona Robbins\",\"3\":\"2\",\"4\":\"friends\"},{\"1\":\"Leah Murphy\",\"2\":\"Alex Karev\",\"3\":\"4\",\"4\":\"benefits\"},{\"1\":\"Lauren Boswell\",\"2\":\"Arizona Robbins\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Arizona Robbins\",\"2\":\"Callie Torres\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Callie Torres\",\"2\":\"Erica Hahn\",\"3\":\"6\",\"4\":\"friends\"},{\"1\":\"Callie Torres\",\"2\":\"Alex Karev\",\"3\":\"12\",\"4\":\"benefits\"},{\"1\":\"Callie Torres\",\"2\":\"Mark Sloan\",\"3\":\"5\",\"4\":\"professional\"},{\"1\":\"Callie Torres\",\"2\":\"George O'Malley\",\"3\":\"2\",\"4\":\"professional\"},{\"1\":\"George O'Malley\",\"2\":\"Izzie Stevens\",\"3\":\"3\",\"4\":\"professional\"},{\"1\":\"George O'Malley\",\"2\":\"Meredith Grey\",\"3\":\"4\",\"4\":\"friends\"},{\"1\":\"Denny Duqutte\",\"2\":\"Izzie Stevens\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Izzie Stevens\",\"2\":\"Alex Karev\",\"3\":\"7\",\"4\":\"professional\"},{\"1\":\"Meredith Grey\",\"2\":\"Derek Sheperd\",\"3\":\"3\",\"4\":\"friends\"},{\"1\":\"Preston Burke\",\"2\":\"Cristina Yang\",\"3\":\"4\",\"4\":\"friends\"},{\"1\":\"Shane Ross\",\"2\":\"Cristina Yang\",\"3\":\"6\",\"4\":\"professional\"},{\"1\":\"Derek Sheperd\",\"2\":\"Rose\",\"3\":\"2\",\"4\":\"friends\"},{\"1\":\"Derek Sheperd\",\"2\":\"Addison Montgomery\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Cristina Yang\",\"2\":\"Owen Hunt\",\"3\":\"1\",\"4\":\"benefits\"},{\"1\":\"Amelia Shepherd\",\"2\":\"Owen Hunt\",\"3\":\"1\",\"4\":\"benefits\"},{\"1\":\"Amelia Shepherd\",\"2\":\"Mark Sloan\",\"3\":\"1\",\"4\":\"professional\"},{\"1\":\"Addison Montgomery\",\"2\":\"Mark Sloan\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Stephanie Edwards\",\"2\":\"Jackson Avery\",\"3\":\"2\",\"4\":\"benefits\"},{\"1\":\"Jackson Avery\",\"2\":\"April Kepner\",\"3\":\"3\",\"4\":\"benefits\"},{\"1\":\"Jackson Avery\",\"2\":\"Lexie Grey\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Reed Adamson\",\"2\":\"Mark Sloan\",\"3\":\"5\",\"4\":\"professional\"},{\"1\":\"Mark Sloan\",\"2\":\"Lexie Grey\",\"3\":\"5\",\"4\":\"professional\"},{\"1\":\"Mark Sloan\",\"2\":\"Teddy Altman\",\"3\":\"7\",\"4\":\"friends\"},{\"1\":\"Lexie Grey\",\"2\":\"Alex Karev\",\"3\":\"12\",\"4\":\"friends\"},{\"1\":\"Alex Karev\",\"2\":\"Heather Brooks\",\"3\":\"2\",\"4\":\"benefits\"},{\"1\":\"Alex Karev\",\"2\":\"Jo Wilson\",\"3\":\"3\",\"4\":\"competition\"},{\"1\":\"Teddy Altman\",\"2\":\"Henry Burton\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Owen Hunt\",\"2\":\"Emma\",\"3\":\"1\",\"4\":\"competition\"},{\"1\":\"Addison Montgomery\",\"2\":\"Alex Karev\",\"3\":\"8\",\"4\":\"friends\"},{\"1\":\"Alex Karev\",\"2\":\"Rebecca Pope\",\"3\":\"1\",\"4\":\"competition\"},{\"1\":\"Alex Karev\",\"2\":\"Lucy Fields\",\"3\":\"9\",\"4\":\"competition\"},{\"1\":\"George O'Malley\",\"2\":\"Nurse Olivia\",\"3\":\"2\",\"4\":\"professional\"},{\"1\":\"Nurse Olivia\",\"2\":\"Alex Karev\",\"3\":\"5\",\"4\":\"professional\"},{\"1\":\"Hank\",\"2\":\"Izzie Stevens\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Andrew Perkins\",\"2\":\"Teddy Altman\",\"3\":\"1\",\"4\":\"competition\"},{\"1\":\"Mark Sloan\",\"2\":\"Nancy Shepard\",\"3\":\"2\",\"4\":\"professional\"},{\"1\":\"Meredith Grey\",\"2\":\"Nathan Riggs\",\"3\":\"3\",\"4\":\"benefits\"},{\"1\":\"Ben Warren\",\"2\":\"Miranda Bailey\",\"3\":\"4\",\"4\":\"benefits\"},{\"1\":\"Miranda Bailey\",\"2\":\"Eli James\",\"3\":\"2\",\"4\":\"professional\"},{\"1\":\"Miranda Bailey\",\"2\":\"Tucker Jones\",\"3\":\"3\",\"4\":\"friends\"},{\"1\":\"Ellis Grey\",\"2\":\"Richard Webber\",\"3\":\"6\",\"4\":\"competition\"},{\"1\":\"Ellis Grey\",\"2\":\"Thatcher Grey\",\"3\":\"1\",\"4\":\"professional\"},{\"1\":\"Richard Webber\",\"2\":\"Catherine Avery\",\"3\":\"1\",\"4\":\"benefits\"},{\"1\":\"Susan Grey\",\"2\":\"Thatcher Grey\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Richard Webber\",\"2\":\"Adele Webber\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Steve Mostow\",\"2\":\"Megan Nowland\",\"3\":\"3\",\"4\":\"competition\"},{\"1\":\"Megan Nowland\",\"2\":\"Pierce Halley\",\"3\":\"4\",\"4\":\"competition\"},{\"1\":\"Steve Murphy\",\"2\":\"Meredith Grey\",\"3\":\"7\",\"4\":\"friends\"},{\"1\":\"Meredith Grey\",\"2\":\"Finn Dandridge\",\"3\":\"1\",\"4\":\"benefits\"},{\"1\":\"Teddy Altman\",\"2\":\"Owen Hunt\",\"3\":\"1\",\"4\":\"friends\"},{\"1\":\"Miranda Bailey\",\"2\":\"Lloyd\",\"3\":\"1\",\"4\":\"professional\"},{\"1\":\"Colin Marlow\",\"2\":\"Cristina Yang\",\"3\":\"1\",\"4\":\"professional\"},{\"1\":\"Dana Seabury\",\"2\":\"Alex Karev\",\"3\":\"12\",\"4\":\"benefits\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n# Relabel greys anatomy nodes and edges for VisNetwork\ngrey_nodes_vis <- grey_nodes %>%\n  rowid_to_column(var = \"id\") %>%\n  rename(\"label\" = name) %>%\n  mutate(sex = case_when(\n    sex == \"F\" ~ \"Female\",\n    sex == \"M\" ~ \"Male\"\n  )) %>%\n  replace_na(., list(sex = \"Transgender?\")) %>%\n  rename(\"group\" = sex)\ngrey_nodes_vis\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"id\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"label\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"group\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"race\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"birthyear\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"position\"],\"name\":[6],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"season\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"sign\"],\"name\":[8],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"1\",\"2\":\"Addison Montgomery\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1967\",\"6\":\"Attending\",\"7\":\"1\",\"8\":\"Libra\"},{\"1\":\"2\",\"2\":\"Adele Webber\",\"3\":\"Female\",\"4\":\"Black\",\"5\":\"1949\",\"6\":\"Non-Staff\",\"7\":\"2\",\"8\":\"Leo\"},{\"1\":\"3\",\"2\":\"Teddy Altman\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1969\",\"6\":\"Attending\",\"7\":\"6\",\"8\":\"Pisces\"},{\"1\":\"4\",\"2\":\"Amelia Shepherd\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1981\",\"6\":\"Attending\",\"7\":\"7\",\"8\":\"Libra\"},{\"1\":\"5\",\"2\":\"Arizona Robbins\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1976\",\"6\":\"Attending\",\"7\":\"5\",\"8\":\"Leo\"},{\"1\":\"6\",\"2\":\"Rebecca Pope\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1975\",\"6\":\"Non-Staff\",\"7\":\"3\",\"8\":\"Gemini\"},{\"1\":\"7\",\"2\":\"Jackson Avery\",\"3\":\"Male\",\"4\":\"Black\",\"5\":\"1981\",\"6\":\"Resident\",\"7\":\"6\",\"8\":\"Leo\"},{\"1\":\"8\",\"2\":\"Miranda Bailey\",\"3\":\"Female\",\"4\":\"Black\",\"5\":\"1969\",\"6\":\"Attending\",\"7\":\"1\",\"8\":\"Virgo\"},{\"1\":\"9\",\"2\":\"Ben Warren\",\"3\":\"Male\",\"4\":\"Black\",\"5\":\"1972\",\"6\":\"Other\",\"7\":\"6\",\"8\":\"Aquarius\"},{\"1\":\"10\",\"2\":\"Henry Burton\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1972\",\"6\":\"Non-Staff\",\"7\":\"7\",\"8\":\"Cancer\"},{\"1\":\"11\",\"2\":\"Catherine Avery\",\"3\":\"Female\",\"4\":\"Other\",\"5\":\"1950\",\"6\":\"Attending\",\"7\":\"8\",\"8\":\"Capricorn\"},{\"1\":\"12\",\"2\":\"Colin Marlow\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1944\",\"6\":\"Attending\",\"7\":\"3\",\"8\":\"Taurus\"},{\"1\":\"13\",\"2\":\"Denny Duqutte\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1966\",\"6\":\"Non-Staff\",\"7\":\"2\",\"8\":\"Taurus\"},{\"1\":\"14\",\"2\":\"Derek Sheperd\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1966\",\"6\":\"Attending\",\"7\":\"1\",\"8\":\"Capricorn\"},{\"1\":\"15\",\"2\":\"Ellis Grey\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1957\",\"6\":\"Attending\",\"7\":\"1\",\"8\":\"Virgo\"},{\"1\":\"16\",\"2\":\"Finn Dandridge\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1970\",\"6\":\"Non-Staff\",\"7\":\"2\",\"8\":\"Cancer\"},{\"1\":\"17\",\"2\":\"Meredith Grey\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1969\",\"6\":\"Resident\",\"7\":\"1\",\"8\":\"Scorpio\"},{\"1\":\"18\",\"2\":\"Erica Hahn\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1967\",\"6\":\"Attending\",\"7\":\"2\",\"8\":\"Gemini\"},{\"1\":\"19\",\"2\":\"Hank\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1975\",\"6\":\"Non-Staff\",\"7\":\"1\",\"8\":\"Sagittarius\"},{\"1\":\"20\",\"2\":\"Izzie Stevens\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1978\",\"6\":\"Resident\",\"7\":\"1\",\"8\":\"Sagittarius\"},{\"1\":\"21\",\"2\":\"Alex Karev\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1970\",\"6\":\"Resident\",\"7\":\"1\",\"8\":\"Cancer\"},{\"1\":\"22\",\"2\":\"April Kepner\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1980\",\"6\":\"Resident\",\"7\":\"6\",\"8\":\"Libra\"},{\"1\":\"23\",\"2\":\"Lexie Grey\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1982\",\"6\":\"Resident\",\"7\":\"3\",\"8\":\"Aries\"},{\"1\":\"24\",\"2\":\"Lloyd\",\"3\":\"Male\",\"4\":\"Black\",\"5\":\"1971\",\"6\":\"Nurse\",\"7\":\"7\",\"8\":\"Capricorn\"},{\"1\":\"25\",\"2\":\"Lucy Fields\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1984\",\"6\":\"Attending\",\"7\":\"7\",\"8\":\"Cancer\"},{\"1\":\"26\",\"2\":\"Megan Nowland\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1979\",\"6\":\"Intern\",\"7\":\"4\",\"8\":\"NA\"},{\"1\":\"27\",\"2\":\"Steve Mostow\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1985\",\"6\":\"Intern\",\"7\":\"4\",\"8\":\"Gemini\"},{\"1\":\"28\",\"2\":\"Dana Seabury\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1952\",\"6\":\"Non-Staff\",\"7\":\"3\",\"8\":\"Leo\"},{\"1\":\"29\",\"2\":\"Nancy Shepard\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1965\",\"6\":\"Non-Staff\",\"7\":\"3\",\"8\":\"Leo\"},{\"1\":\"30\",\"2\":\"Nurse Olivia\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1982\",\"6\":\"Nurse\",\"7\":\"1\",\"8\":\"Capricorn\"},{\"1\":\"31\",\"2\":\"George O'Malley\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1973\",\"6\":\"Resident\",\"7\":\"1\",\"8\":\"Aries\"},{\"1\":\"32\",\"2\":\"Owen Hunt\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1973\",\"6\":\"Chief\",\"7\":\"5\",\"8\":\"Leo\"},{\"1\":\"33\",\"2\":\"Andrew Perkins\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1965\",\"6\":\"Other\",\"7\":\"7\",\"8\":\"Leo\"},{\"1\":\"34\",\"2\":\"Pierce Halley\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1986\",\"6\":\"Intern\",\"7\":\"4\",\"8\":\"NA\"},{\"1\":\"35\",\"2\":\"Preston Burke\",\"3\":\"Male\",\"4\":\"Black\",\"5\":\"1963\",\"6\":\"Attending\",\"7\":\"1\",\"8\":\"Leo\"},{\"1\":\"36\",\"2\":\"Reed Adamson\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1981\",\"6\":\"Resident\",\"7\":\"6\",\"8\":\"Aquarius\"},{\"1\":\"37\",\"2\":\"Mark Sloan\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1972\",\"6\":\"Attending\",\"7\":\"2\",\"8\":\"Scorpio\"},{\"1\":\"38\",\"2\":\"Steve Murphy\",\"3\":\"Male\",\"4\":\"Other\",\"5\":\"1984\",\"6\":\"Non-Staff\",\"7\":\"2\",\"8\":\"Gemini\"},{\"1\":\"39\",\"2\":\"Susan Grey\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1959\",\"6\":\"Non-Staff\",\"7\":\"2\",\"8\":\"Taurus\"},{\"1\":\"40\",\"2\":\"Thatcher Grey\",\"3\":\"Male\",\"4\":\"White\",\"5\":\"1955\",\"6\":\"Non-Staff\",\"7\":\"2\",\"8\":\"Leo\"},{\"1\":\"41\",\"2\":\"Callie Torres\",\"3\":\"Female\",\"4\":\"Other\",\"5\":\"1975\",\"6\":\"Attending\",\"7\":\"2\",\"8\":\"Virgo\"},{\"1\":\"42\",\"2\":\"Tucker Jones\",\"3\":\"Male\",\"4\":\"Black\",\"5\":\"1970\",\"6\":\"Non-Staff\",\"7\":\"2\",\"8\":\"Leo\"},{\"1\":\"43\",\"2\":\"Cristina Yang\",\"3\":\"Female\",\"4\":\"Other\",\"5\":\"1971\",\"6\":\"Resident\",\"7\":\"1\",\"8\":\"Cancer\"},{\"1\":\"44\",\"2\":\"Heather Brooks\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1985\",\"6\":\"NA\",\"7\":\"9\",\"8\":\"NA\"},{\"1\":\"45\",\"2\":\"Jo Wilson\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1983\",\"6\":\"Resident\",\"7\":\"9\",\"8\":\"NA\"},{\"1\":\"46\",\"2\":\"Lauren Boswell\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"9\",\"8\":\"NA\"},{\"1\":\"47\",\"2\":\"Leah Murphy\",\"3\":\"Female\",\"4\":\"White\",\"5\":\"1987\",\"6\":\"NA\",\"7\":\"9\",\"8\":\"NA\"},{\"1\":\"48\",\"2\":\"Eli James\",\"3\":\"Transgender?\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\"},{\"1\":\"49\",\"2\":\"Emma\",\"3\":\"Female\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\"},{\"1\":\"50\",\"2\":\"Stephanie Edwards\",\"3\":\"Female\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\"},{\"1\":\"51\",\"2\":\"Shane Ross\",\"3\":\"Transgender?\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\"},{\"1\":\"52\",\"2\":\"Richard Webber\",\"3\":\"Male\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\"},{\"1\":\"53\",\"2\":\"Rose\",\"3\":\"Female\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\"},{\"1\":\"54\",\"2\":\"Nathan Riggs\",\"3\":\"Male\",\"4\":\"NA\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\ngrey_edges_vis <- grey_edges %>%\n  select(from, to) %>%\n  left_join(., grey_nodes_vis,\n    by = c(\"from\" = \"label\")\n  ) %>%\n  left_join(., grey_nodes_vis,\n    by = c(\"to\" = \"label\")\n  ) %>%\n  select(\"from\" = id.x, \"to\" = id.y)\ngrey_edges_vis\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"from\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"to\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"47\",\"2\":\"5\"},{\"1\":\"47\",\"2\":\"21\"},{\"1\":\"46\",\"2\":\"5\"},{\"1\":\"5\",\"2\":\"41\"},{\"1\":\"41\",\"2\":\"18\"},{\"1\":\"41\",\"2\":\"21\"},{\"1\":\"41\",\"2\":\"37\"},{\"1\":\"41\",\"2\":\"31\"},{\"1\":\"31\",\"2\":\"20\"},{\"1\":\"31\",\"2\":\"17\"},{\"1\":\"13\",\"2\":\"20\"},{\"1\":\"20\",\"2\":\"21\"},{\"1\":\"17\",\"2\":\"14\"},{\"1\":\"35\",\"2\":\"43\"},{\"1\":\"51\",\"2\":\"43\"},{\"1\":\"14\",\"2\":\"53\"},{\"1\":\"14\",\"2\":\"1\"},{\"1\":\"43\",\"2\":\"32\"},{\"1\":\"4\",\"2\":\"32\"},{\"1\":\"4\",\"2\":\"37\"},{\"1\":\"1\",\"2\":\"37\"},{\"1\":\"50\",\"2\":\"7\"},{\"1\":\"7\",\"2\":\"22\"},{\"1\":\"7\",\"2\":\"23\"},{\"1\":\"36\",\"2\":\"37\"},{\"1\":\"37\",\"2\":\"23\"},{\"1\":\"37\",\"2\":\"3\"},{\"1\":\"23\",\"2\":\"21\"},{\"1\":\"21\",\"2\":\"44\"},{\"1\":\"21\",\"2\":\"45\"},{\"1\":\"3\",\"2\":\"10\"},{\"1\":\"32\",\"2\":\"49\"},{\"1\":\"1\",\"2\":\"21\"},{\"1\":\"21\",\"2\":\"6\"},{\"1\":\"21\",\"2\":\"25\"},{\"1\":\"31\",\"2\":\"30\"},{\"1\":\"30\",\"2\":\"21\"},{\"1\":\"19\",\"2\":\"20\"},{\"1\":\"33\",\"2\":\"3\"},{\"1\":\"37\",\"2\":\"29\"},{\"1\":\"17\",\"2\":\"54\"},{\"1\":\"9\",\"2\":\"8\"},{\"1\":\"8\",\"2\":\"48\"},{\"1\":\"8\",\"2\":\"42\"},{\"1\":\"15\",\"2\":\"52\"},{\"1\":\"15\",\"2\":\"40\"},{\"1\":\"52\",\"2\":\"11\"},{\"1\":\"39\",\"2\":\"40\"},{\"1\":\"52\",\"2\":\"2\"},{\"1\":\"27\",\"2\":\"26\"},{\"1\":\"26\",\"2\":\"34\"},{\"1\":\"38\",\"2\":\"17\"},{\"1\":\"17\",\"2\":\"16\"},{\"1\":\"3\",\"2\":\"32\"},{\"1\":\"8\",\"2\":\"24\"},{\"1\":\"12\",\"2\":\"43\"},{\"1\":\"28\",\"2\":\"21\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nUsing [fontawesome icons](https://fontawesome.com/v6.0/icons)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ngrey_nodes_vis %>%\n  visNetwork(nodes = ., edges = grey_edges_vis) %>%\n  visNodes(font = list(size = 40)) %>%\n  # Colour and icons for each of the gender-groups\n  visGroups(\n    groupname = \"Female\", shape = \"icon\",\n    icon = list(code = \"f182\", size = 75, color = \"tomato\"),\n    shadow = list(enabled = TRUE)\n  ) %>%\n  visGroups(\n    groupname = \"Male\", shape = \"icon\",\n    icon = list(code = \"f183\", size = 75, color = \"slateblue\"),\n    shadow = list(enabled = TRUE)\n  ) %>%\n  visGroups(\n    groupname = \"Transgender?\", shape = \"icon\",\n    icon = list(code = \"f22c\", size = 75, color = \"fuchsia\"),\n    shadow = list(enabled = TRUE)\n  ) %>%\n  # visLegend() %>%\n  # Add the fontawesome icons!!\n  addFontAwesome(version = \"4.7.0\") %>%\n  # Add Interaction Controls\n  visInteraction(\n    navigationButtons = TRUE,\n    hover = TRUE,\n    selectConnectedEdges = TRUE,\n    hoverConnectedEdges = TRUE,\n    zoomView = TRUE\n  )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"visNetwork html-widget html-fill-item\" id=\"htmlwidget-19ce853b3d5fb1f4d1c3\" style=\"width:100%;height:401px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-19ce853b3d5fb1f4d1c3\">{\"x\":{\"nodes\":{\"id\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54],\"label\":[\"Addison Montgomery\",\"Adele Webber\",\"Teddy Altman\",\"Amelia Shepherd\",\"Arizona Robbins\",\"Rebecca Pope\",\"Jackson Avery\",\"Miranda Bailey\",\"Ben Warren\",\"Henry Burton\",\"Catherine Avery\",\"Colin Marlow\",\"Denny Duqutte\",\"Derek Sheperd\",\"Ellis Grey\",\"Finn Dandridge\",\"Meredith Grey\",\"Erica Hahn\",\"Hank\",\"Izzie Stevens\",\"Alex Karev\",\"April Kepner\",\"Lexie Grey\",\"Lloyd\",\"Lucy Fields\",\"Megan Nowland\",\"Steve Mostow\",\"Dana Seabury\",\"Nancy Shepard\",\"Nurse Olivia\",\"George O'Malley\",\"Owen Hunt\",\"Andrew Perkins\",\"Pierce Halley\",\"Preston Burke\",\"Reed Adamson\",\"Mark Sloan\",\"Steve Murphy\",\"Susan Grey\",\"Thatcher Grey\",\"Callie Torres\",\"Tucker Jones\",\"Cristina Yang\",\"Heather Brooks\",\"Jo Wilson\",\"Lauren Boswell\",\"Leah Murphy\",\"Eli James\",\"Emma\",\"Stephanie Edwards\",\"Shane Ross\",\"Richard Webber\",\"Rose\",\"Nathan Riggs\"],\"group\":[\"Female\",\"Female\",\"Female\",\"Female\",\"Female\",\"Female\",\"Male\",\"Female\",\"Male\",\"Male\",\"Female\",\"Male\",\"Male\",\"Male\",\"Female\",\"Male\",\"Female\",\"Female\",\"Male\",\"Female\",\"Male\",\"Female\",\"Female\",\"Male\",\"Female\",\"Female\",\"Male\",\"Female\",\"Female\",\"Female\",\"Male\",\"Male\",\"Male\",\"Male\",\"Male\",\"Female\",\"Male\",\"Male\",\"Female\",\"Male\",\"Female\",\"Male\",\"Female\",\"Female\",\"Female\",\"Female\",\"Female\",\"Transgender?\",\"Female\",\"Female\",\"Transgender?\",\"Male\",\"Female\",\"Male\"],\"race\":[\"White\",\"Black\",\"White\",\"White\",\"White\",\"White\",\"Black\",\"Black\",\"Black\",\"White\",\"Other\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"Black\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"Black\",\"White\",\"White\",\"Other\",\"White\",\"White\",\"Other\",\"Black\",\"Other\",\"White\",\"White\",\"White\",\"White\",null,null,null,null,null,null,null],\"birthyear\":[1967,1949,1969,1981,1976,1975,1981,1969,1972,1972,1950,1944,1966,1966,1957,1970,1969,1967,1975,1978,1970,1980,1982,1971,1984,1979,1985,1952,1965,1982,1973,1973,1965,1986,1963,1981,1972,1984,1959,1955,1975,1970,1971,1985,1983,null,1987,null,null,null,null,null,null,null],\"position\":[\"Attending\",\"Non-Staff\",\"Attending\",\"Attending\",\"Attending\",\"Non-Staff\",\"Resident\",\"Attending\",\"Other\",\"Non-Staff\",\"Attending\",\"Attending\",\"Non-Staff\",\"Attending\",\"Attending\",\"Non-Staff\",\"Resident\",\"Attending\",\"Non-Staff\",\"Resident\",\"Resident\",\"Resident\",\"Resident\",\"Nurse\",\"Attending\",\"Intern\",\"Intern\",\"Non-Staff\",\"Non-Staff\",\"Nurse\",\"Resident\",\"Chief\",\"Other\",\"Intern\",\"Attending\",\"Resident\",\"Attending\",\"Non-Staff\",\"Non-Staff\",\"Non-Staff\",\"Attending\",\"Non-Staff\",\"Resident\",null,\"Resident\",null,null,null,null,null,null,null,null,null],\"season\":[1,2,6,7,5,3,6,1,6,7,8,3,2,1,1,2,1,2,1,1,1,6,3,7,7,4,4,3,3,1,1,5,7,4,1,6,2,2,2,2,2,2,1,9,9,9,9,null,null,null,null,null,null,null],\"sign\":[\"Libra\",\"Leo\",\"Pisces\",\"Libra\",\"Leo\",\"Gemini\",\"Leo\",\"Virgo\",\"Aquarius\",\"Cancer\",\"Capricorn\",\"Taurus\",\"Taurus\",\"Capricorn\",\"Virgo\",\"Cancer\",\"Scorpio\",\"Gemini\",\"Sagittarius\",\"Sagittarius\",\"Cancer\",\"Libra\",\"Aries\",\"Capricorn\",\"Cancer\",null,\"Gemini\",\"Leo\",\"Leo\",\"Capricorn\",\"Aries\",\"Leo\",\"Leo\",null,\"Leo\",\"Aquarius\",\"Scorpio\",\"Gemini\",\"Taurus\",\"Leo\",\"Virgo\",\"Leo\",\"Cancer\",null,null,null,null,null,null,null,null,null,null,null]},\"edges\":{\"from\":[47,47,46,5,41,41,41,41,31,31,13,20,17,35,51,14,14,43,4,4,1,50,7,7,36,37,37,23,21,21,3,32,1,21,21,31,30,19,33,37,17,9,8,8,15,15,52,39,52,27,26,38,17,3,8,12,28],\"to\":[5,21,5,41,18,21,37,31,20,17,20,21,14,43,43,53,1,32,32,37,37,7,22,23,37,23,3,21,44,45,10,49,21,6,25,30,21,20,3,29,54,8,48,42,52,40,11,40,2,26,34,17,16,32,24,43,21]},\"nodesToDataframe\":true,\"edgesToDataframe\":true,\"options\":{\"width\":\"100%\",\"height\":\"100%\",\"nodes\":{\"shape\":\"dot\",\"font\":{\"size\":40}},\"manipulation\":{\"enabled\":false},\"groups\":{\"Female\":{\"shape\":\"icon\",\"icon\":{\"code\":\"f182\",\"size\":75,\"color\":\"tomato\"},\"shadow\":{\"enabled\":true}},\"Male\":{\"shape\":\"icon\",\"icon\":{\"code\":\"f183\",\"size\":75,\"color\":\"slateblue\"},\"shadow\":{\"enabled\":true}},\"useDefaultGroups\":true,\"Transgender?\":{\"shape\":\"icon\",\"icon\":{\"code\":\"f22c\",\"size\":75,\"color\":\"fuchsia\"},\"shadow\":{\"enabled\":true}}},\"interaction\":{\"hover\":true,\"hoverConnectedEdges\":true,\"navigationButtons\":true,\"selectConnectedEdges\":true,\"zoomView\":true,\"zoomSpeed\":1}},\"groups\":[\"Female\",\"Male\",\"Transgender?\"],\"width\":null,\"height\":null,\"idselection\":{\"enabled\":false},\"byselection\":{\"enabled\":false},\"main\":null,\"submain\":null,\"footer\":null,\"background\":\"rgba(0, 0, 0, 0)\",\"iconsRedraw\":true,\"tooltipStay\":300,\"tooltipStyle\":\"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\nThere is another family of icons available in `visNetwork`, called\n[`ionicons`](https://unpkg.com/ionicons@5.5.2/dist/cheatsheet.html).\nLet's see how they look:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ngrey_nodes_vis %>%\n  visNetwork(nodes = ., edges = grey_edges_vis, ) %>%\n  visLayout(randomSeed = 12345) %>%\n  visNodes(font = list(size = 50)) %>%\n  visEdges(color = \"green\") %>%\n  visGroups(\n    groupname = \"Female\",\n    shape = \"icon\",\n    icon = list(\n      face = \"Ionicons\",\n      code = \"f25d\",\n      color = \"fuchsia\",\n      size = 125\n    )\n  ) %>%\n  visGroups(\n    groupname = \"Male\",\n    shape = \"icon\",\n    icon = list(\n      face = \"Ionicons\",\n      code = \"f202\",\n      color = \"green\",\n      size = 125\n    )\n  ) %>%\n  visGroups(\n    groupname = \"Transgender?\",\n    shape = \"icon\",\n    icon = list(\n      face = \"Ionicons\",\n      code = \"f233\",\n      color = \"dodgerblue\",\n      size = 125\n    )\n  ) %>%\n  visLegend() %>%\n  addIonicons() %>%\n  visInteraction(\n    navigationButtons = TRUE,\n    hover = TRUE,\n    selectConnectedEdges = TRUE,\n    hoverConnectedEdges = TRUE,\n    zoomView = TRUE\n  )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"visNetwork html-widget html-fill-item\" id=\"htmlwidget-a1e56196ad24ae0278d1\" style=\"width:100%;height:401px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-a1e56196ad24ae0278d1\">{\"x\":{\"nodes\":{\"id\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54],\"label\":[\"Addison Montgomery\",\"Adele Webber\",\"Teddy Altman\",\"Amelia Shepherd\",\"Arizona Robbins\",\"Rebecca Pope\",\"Jackson Avery\",\"Miranda Bailey\",\"Ben Warren\",\"Henry Burton\",\"Catherine Avery\",\"Colin Marlow\",\"Denny Duqutte\",\"Derek Sheperd\",\"Ellis Grey\",\"Finn Dandridge\",\"Meredith Grey\",\"Erica Hahn\",\"Hank\",\"Izzie Stevens\",\"Alex Karev\",\"April Kepner\",\"Lexie Grey\",\"Lloyd\",\"Lucy Fields\",\"Megan Nowland\",\"Steve Mostow\",\"Dana Seabury\",\"Nancy Shepard\",\"Nurse Olivia\",\"George O'Malley\",\"Owen Hunt\",\"Andrew Perkins\",\"Pierce Halley\",\"Preston Burke\",\"Reed Adamson\",\"Mark Sloan\",\"Steve Murphy\",\"Susan Grey\",\"Thatcher Grey\",\"Callie Torres\",\"Tucker Jones\",\"Cristina Yang\",\"Heather Brooks\",\"Jo Wilson\",\"Lauren Boswell\",\"Leah Murphy\",\"Eli James\",\"Emma\",\"Stephanie Edwards\",\"Shane Ross\",\"Richard Webber\",\"Rose\",\"Nathan Riggs\"],\"group\":[\"Female\",\"Female\",\"Female\",\"Female\",\"Female\",\"Female\",\"Male\",\"Female\",\"Male\",\"Male\",\"Female\",\"Male\",\"Male\",\"Male\",\"Female\",\"Male\",\"Female\",\"Female\",\"Male\",\"Female\",\"Male\",\"Female\",\"Female\",\"Male\",\"Female\",\"Female\",\"Male\",\"Female\",\"Female\",\"Female\",\"Male\",\"Male\",\"Male\",\"Male\",\"Male\",\"Female\",\"Male\",\"Male\",\"Female\",\"Male\",\"Female\",\"Male\",\"Female\",\"Female\",\"Female\",\"Female\",\"Female\",\"Transgender?\",\"Female\",\"Female\",\"Transgender?\",\"Male\",\"Female\",\"Male\"],\"race\":[\"White\",\"Black\",\"White\",\"White\",\"White\",\"White\",\"Black\",\"Black\",\"Black\",\"White\",\"Other\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"Black\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"White\",\"Black\",\"White\",\"White\",\"Other\",\"White\",\"White\",\"Other\",\"Black\",\"Other\",\"White\",\"White\",\"White\",\"White\",null,null,null,null,null,null,null],\"birthyear\":[1967,1949,1969,1981,1976,1975,1981,1969,1972,1972,1950,1944,1966,1966,1957,1970,1969,1967,1975,1978,1970,1980,1982,1971,1984,1979,1985,1952,1965,1982,1973,1973,1965,1986,1963,1981,1972,1984,1959,1955,1975,1970,1971,1985,1983,null,1987,null,null,null,null,null,null,null],\"position\":[\"Attending\",\"Non-Staff\",\"Attending\",\"Attending\",\"Attending\",\"Non-Staff\",\"Resident\",\"Attending\",\"Other\",\"Non-Staff\",\"Attending\",\"Attending\",\"Non-Staff\",\"Attending\",\"Attending\",\"Non-Staff\",\"Resident\",\"Attending\",\"Non-Staff\",\"Resident\",\"Resident\",\"Resident\",\"Resident\",\"Nurse\",\"Attending\",\"Intern\",\"Intern\",\"Non-Staff\",\"Non-Staff\",\"Nurse\",\"Resident\",\"Chief\",\"Other\",\"Intern\",\"Attending\",\"Resident\",\"Attending\",\"Non-Staff\",\"Non-Staff\",\"Non-Staff\",\"Attending\",\"Non-Staff\",\"Resident\",null,\"Resident\",null,null,null,null,null,null,null,null,null],\"season\":[1,2,6,7,5,3,6,1,6,7,8,3,2,1,1,2,1,2,1,1,1,6,3,7,7,4,4,3,3,1,1,5,7,4,1,6,2,2,2,2,2,2,1,9,9,9,9,null,null,null,null,null,null,null],\"sign\":[\"Libra\",\"Leo\",\"Pisces\",\"Libra\",\"Leo\",\"Gemini\",\"Leo\",\"Virgo\",\"Aquarius\",\"Cancer\",\"Capricorn\",\"Taurus\",\"Taurus\",\"Capricorn\",\"Virgo\",\"Cancer\",\"Scorpio\",\"Gemini\",\"Sagittarius\",\"Sagittarius\",\"Cancer\",\"Libra\",\"Aries\",\"Capricorn\",\"Cancer\",null,\"Gemini\",\"Leo\",\"Leo\",\"Capricorn\",\"Aries\",\"Leo\",\"Leo\",null,\"Leo\",\"Aquarius\",\"Scorpio\",\"Gemini\",\"Taurus\",\"Leo\",\"Virgo\",\"Leo\",\"Cancer\",null,null,null,null,null,null,null,null,null,null,null]},\"edges\":{\"from\":[47,47,46,5,41,41,41,41,31,31,13,20,17,35,51,14,14,43,4,4,1,50,7,7,36,37,37,23,21,21,3,32,1,21,21,31,30,19,33,37,17,9,8,8,15,15,52,39,52,27,26,38,17,3,8,12,28],\"to\":[5,21,5,41,18,21,37,31,20,17,20,21,14,43,43,53,1,32,32,37,37,7,22,23,37,23,3,21,44,45,10,49,21,6,25,30,21,20,3,29,54,8,48,42,52,40,11,40,2,26,34,17,16,32,24,43,21]},\"nodesToDataframe\":true,\"edgesToDataframe\":true,\"options\":{\"width\":\"100%\",\"height\":\"100%\",\"nodes\":{\"shape\":\"dot\",\"font\":{\"size\":50}},\"manipulation\":{\"enabled\":false},\"layout\":{\"randomSeed\":12345},\"edges\":{\"color\":\"green\"},\"groups\":{\"Female\":{\"shape\":\"icon\",\"icon\":{\"face\":\"Ionicons\",\"code\":\"f25d\",\"color\":\"fuchsia\",\"size\":125}},\"Male\":{\"shape\":\"icon\",\"icon\":{\"face\":\"Ionicons\",\"code\":\"f202\",\"color\":\"green\",\"size\":125}},\"useDefaultGroups\":true,\"Transgender?\":{\"shape\":\"icon\",\"icon\":{\"face\":\"Ionicons\",\"code\":\"f233\",\"color\":\"dodgerblue\",\"size\":125}}},\"interaction\":{\"hover\":true,\"hoverConnectedEdges\":true,\"navigationButtons\":true,\"selectConnectedEdges\":true,\"zoomView\":true,\"zoomSpeed\":1}},\"groups\":[\"Female\",\"Male\",\"Transgender?\"],\"width\":null,\"height\":null,\"idselection\":{\"enabled\":false},\"byselection\":{\"enabled\":false},\"main\":null,\"submain\":null,\"footer\":null,\"background\":\"rgba(0, 0, 0, 0)\",\"legend\":{\"width\":0.2,\"useGroups\":true,\"position\":\"left\",\"ncol\":1,\"stepX\":100,\"stepY\":100,\"zoom\":true},\"iconsRedraw\":true,\"tooltipStay\":300,\"tooltipStyle\":\"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\nSome idea of interactivity and controls with `visNetwork`:\n\n{{< downloadthis \"data/star-wars-network-nodes.csv\" dname=\"star_wars_nodes\" label=\"Star Wars Nodes\" icon=\"database-fill-down\" type=\"info\" >}}\n\n{{< downloadthis \"data/star-wars-network-edges.csv\" dname=\"star_wars_edges\" label=\"Star Wars Edges\" icon=\"database-fill-down\" type=\"info\" >}}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# let's look again at the data\nstarwars_nodes <- read_csv(\"data/star-wars-network-nodes.csv\")\nstarwars_edges <- read_csv(\"data/star-wars-network-edges.csv\")\n```\n:::\n\n\n\n::: {.cell layout-ncol=\"2\" layout-align=\"center\"}\n\n```{.r .cell-code}\n# We need to rename starwars nodes dataframe and edge dataframe columns for visNetwork\nstarwars_nodes_vis <-\n  starwars_nodes %>%\n  rename(\"label\" = name)\n\n# Convert from and to columns to **node ids**\nstarwars_edges_vis <-\n  starwars_edges %>%\n  # Matching Source <- Source Node id (\"id.x\")\n  left_join(., starwars_nodes_vis, by = c(\"source\" = \"label\")) %>%\n  # Matching Target <- Target Node id (\"id.y\")\n  left_join(., starwars_nodes_vis, by = c(\"target\" = \"label\")) %>%\n  # Select \"id.x\" and \"id.y\" ONLY\n  # Rename them as \"from\" and \"to\"\n  # keep \"weight\" column for aesthetics of edges\n  select(\"from\" = id.x, \"to\" = id.y, \"value\" = weight)\n\n# Check everything once\nstarwars_nodes_vis\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"label\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"id\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"R2-D2\",\"2\":\"0\"},{\"1\":\"CHEWBACCA\",\"2\":\"1\"},{\"1\":\"C-3PO\",\"2\":\"2\"},{\"1\":\"LUKE\",\"2\":\"3\"},{\"1\":\"DARTH VADER\",\"2\":\"4\"},{\"1\":\"CAMIE\",\"2\":\"5\"},{\"1\":\"BIGGS\",\"2\":\"6\"},{\"1\":\"LEIA\",\"2\":\"7\"},{\"1\":\"BERU\",\"2\":\"8\"},{\"1\":\"OWEN\",\"2\":\"9\"},{\"1\":\"OBI-WAN\",\"2\":\"10\"},{\"1\":\"MOTTI\",\"2\":\"11\"},{\"1\":\"TARKIN\",\"2\":\"12\"},{\"1\":\"HAN\",\"2\":\"13\"},{\"1\":\"GREEDO\",\"2\":\"14\"},{\"1\":\"JABBA\",\"2\":\"15\"},{\"1\":\"DODONNA\",\"2\":\"16\"},{\"1\":\"GOLD LEADER\",\"2\":\"17\"},{\"1\":\"WEDGE\",\"2\":\"18\"},{\"1\":\"RED LEADER\",\"2\":\"19\"},{\"1\":\"RED TEN\",\"2\":\"20\"},{\"1\":\"GOLD FIVE\",\"2\":\"21\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nstarwars_edges_vis\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"from\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"to\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"value\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2\",\"2\":\"0\",\"3\":\"17\"},{\"1\":\"3\",\"2\":\"0\",\"3\":\"13\"},{\"1\":\"10\",\"2\":\"0\",\"3\":\"6\"},{\"1\":\"7\",\"2\":\"0\",\"3\":\"5\"},{\"1\":\"13\",\"2\":\"0\",\"3\":\"5\"},{\"1\":\"1\",\"2\":\"0\",\"3\":\"3\"},{\"1\":\"16\",\"2\":\"0\",\"3\":\"1\"},{\"1\":\"1\",\"2\":\"10\",\"3\":\"7\"},{\"1\":\"2\",\"2\":\"1\",\"3\":\"5\"},{\"1\":\"1\",\"2\":\"3\",\"3\":\"16\"},{\"1\":\"1\",\"2\":\"13\",\"3\":\"19\"},{\"1\":\"1\",\"2\":\"7\",\"3\":\"11\"},{\"1\":\"1\",\"2\":\"4\",\"3\":\"1\"},{\"1\":\"1\",\"2\":\"16\",\"3\":\"1\"},{\"1\":\"5\",\"2\":\"3\",\"3\":\"2\"},{\"1\":\"6\",\"2\":\"5\",\"3\":\"2\"},{\"1\":\"6\",\"2\":\"3\",\"3\":\"4\"},{\"1\":\"4\",\"2\":\"7\",\"3\":\"1\"},{\"1\":\"8\",\"2\":\"3\",\"3\":\"3\"},{\"1\":\"8\",\"2\":\"9\",\"3\":\"3\"},{\"1\":\"8\",\"2\":\"2\",\"3\":\"2\"},{\"1\":\"3\",\"2\":\"9\",\"3\":\"3\"},{\"1\":\"2\",\"2\":\"3\",\"3\":\"18\"},{\"1\":\"2\",\"2\":\"9\",\"3\":\"2\"},{\"1\":\"2\",\"2\":\"7\",\"3\":\"6\"},{\"1\":\"7\",\"2\":\"3\",\"3\":\"17\"},{\"1\":\"8\",\"2\":\"7\",\"3\":\"1\"},{\"1\":\"3\",\"2\":\"10\",\"3\":\"19\"},{\"1\":\"2\",\"2\":\"10\",\"3\":\"6\"},{\"1\":\"7\",\"2\":\"10\",\"3\":\"1\"},{\"1\":\"11\",\"2\":\"12\",\"3\":\"2\"},{\"1\":\"4\",\"2\":\"11\",\"3\":\"1\"},{\"1\":\"4\",\"2\":\"12\",\"3\":\"7\"},{\"1\":\"13\",\"2\":\"10\",\"3\":\"9\"},{\"1\":\"13\",\"2\":\"3\",\"3\":\"26\"},{\"1\":\"14\",\"2\":\"13\",\"3\":\"1\"},{\"1\":\"13\",\"2\":\"15\",\"3\":\"1\"},{\"1\":\"2\",\"2\":\"13\",\"3\":\"6\"},{\"1\":\"7\",\"2\":\"11\",\"3\":\"1\"},{\"1\":\"7\",\"2\":\"12\",\"3\":\"1\"},{\"1\":\"13\",\"2\":\"7\",\"3\":\"13\"},{\"1\":\"4\",\"2\":\"10\",\"3\":\"1\"},{\"1\":\"16\",\"2\":\"17\",\"3\":\"1\"},{\"1\":\"16\",\"2\":\"18\",\"3\":\"1\"},{\"1\":\"16\",\"2\":\"3\",\"3\":\"1\"},{\"1\":\"17\",\"2\":\"18\",\"3\":\"1\"},{\"1\":\"17\",\"2\":\"3\",\"3\":\"1\"},{\"1\":\"3\",\"2\":\"18\",\"3\":\"2\"},{\"1\":\"6\",\"2\":\"7\",\"3\":\"1\"},{\"1\":\"7\",\"2\":\"19\",\"3\":\"1\"},{\"1\":\"3\",\"2\":\"19\",\"3\":\"3\"},{\"1\":\"6\",\"2\":\"19\",\"3\":\"3\"},{\"1\":\"6\",\"2\":\"2\",\"3\":\"1\"},{\"1\":\"2\",\"2\":\"19\",\"3\":\"1\"},{\"1\":\"19\",\"2\":\"18\",\"3\":\"3\"},{\"1\":\"17\",\"2\":\"19\",\"3\":\"1\"},{\"1\":\"6\",\"2\":\"18\",\"3\":\"2\"},{\"1\":\"19\",\"2\":\"20\",\"3\":\"1\"},{\"1\":\"6\",\"2\":\"17\",\"3\":\"1\"},{\"1\":\"3\",\"2\":\"20\",\"3\":\"1\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nOk, let's make things move and shake!!\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvisNetwork(\n  nodes = starwars_nodes_vis,\n  edges = starwars_edges_vis\n) %>%\n  visNodes(font = list(size = 30)) %>%\n  visEdges(color = \"red\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"visNetwork html-widget html-fill-item\" id=\"htmlwidget-86be1e5fd677c1b9d3d9\" style=\"width:100%;height:401px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-86be1e5fd677c1b9d3d9\">{\"x\":{\"nodes\":{\"label\":[\"R2-D2\",\"CHEWBACCA\",\"C-3PO\",\"LUKE\",\"DARTH VADER\",\"CAMIE\",\"BIGGS\",\"LEIA\",\"BERU\",\"OWEN\",\"OBI-WAN\",\"MOTTI\",\"TARKIN\",\"HAN\",\"GREEDO\",\"JABBA\",\"DODONNA\",\"GOLD LEADER\",\"WEDGE\",\"RED LEADER\",\"RED TEN\",\"GOLD FIVE\"],\"id\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]},\"edges\":{\"from\":[2,3,10,7,13,1,16,1,2,1,1,1,1,1,5,6,6,4,8,8,8,3,2,2,2,7,8,3,2,7,11,4,4,13,13,14,13,2,7,7,13,4,16,16,16,17,17,3,6,7,3,6,6,2,19,17,6,19,6,3],\"to\":[0,0,0,0,0,0,0,10,1,3,13,7,4,16,3,5,3,7,3,9,2,9,3,9,7,3,7,10,10,10,12,11,12,10,3,13,15,13,11,12,7,10,17,18,3,18,3,18,7,19,19,19,2,19,18,19,18,20,17,20],\"value\":[17,13,6,5,5,3,1,7,5,16,19,11,1,1,2,2,4,1,3,3,2,3,18,2,6,17,1,19,6,1,2,1,7,9,26,1,1,6,1,1,13,1,1,1,1,1,1,2,1,1,3,3,1,1,3,1,2,1,1,1]},\"nodesToDataframe\":true,\"edgesToDataframe\":true,\"options\":{\"width\":\"100%\",\"height\":\"100%\",\"nodes\":{\"shape\":\"dot\",\"font\":{\"size\":30}},\"manipulation\":{\"enabled\":false},\"edges\":{\"color\":\"red\"}},\"groups\":null,\"width\":null,\"height\":null,\"idselection\":{\"enabled\":false},\"byselection\":{\"enabled\":false},\"main\":null,\"submain\":null,\"footer\":null,\"background\":\"rgba(0, 0, 0, 0)\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nvisNetwork(\n  nodes = starwars_nodes_vis,\n  edges = starwars_edges_vis\n) %>%\n  visNodes(\n    font = list(size = 30), shape = \"icon\",\n    icon = list(code = \"f1e3\", size = 75)\n  ) %>%\n  visEdges(color = list(color = \"red\", hover = \"green\", highlight = \"black\")) %>%\n  visInteraction(hover = TRUE) %>%\n  addFontAwesome(version = \"4.7.0\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"visNetwork html-widget html-fill-item\" id=\"htmlwidget-d8d302ffd22137265de4\" style=\"width:100%;height:401px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-d8d302ffd22137265de4\">{\"x\":{\"nodes\":{\"label\":[\"R2-D2\",\"CHEWBACCA\",\"C-3PO\",\"LUKE\",\"DARTH VADER\",\"CAMIE\",\"BIGGS\",\"LEIA\",\"BERU\",\"OWEN\",\"OBI-WAN\",\"MOTTI\",\"TARKIN\",\"HAN\",\"GREEDO\",\"JABBA\",\"DODONNA\",\"GOLD LEADER\",\"WEDGE\",\"RED LEADER\",\"RED TEN\",\"GOLD FIVE\"],\"id\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]},\"edges\":{\"from\":[2,3,10,7,13,1,16,1,2,1,1,1,1,1,5,6,6,4,8,8,8,3,2,2,2,7,8,3,2,7,11,4,4,13,13,14,13,2,7,7,13,4,16,16,16,17,17,3,6,7,3,6,6,2,19,17,6,19,6,3],\"to\":[0,0,0,0,0,0,0,10,1,3,13,7,4,16,3,5,3,7,3,9,2,9,3,9,7,3,7,10,10,10,12,11,12,10,3,13,15,13,11,12,7,10,17,18,3,18,3,18,7,19,19,19,2,19,18,19,18,20,17,20],\"value\":[17,13,6,5,5,3,1,7,5,16,19,11,1,1,2,2,4,1,3,3,2,3,18,2,6,17,1,19,6,1,2,1,7,9,26,1,1,6,1,1,13,1,1,1,1,1,1,2,1,1,3,3,1,1,3,1,2,1,1,1]},\"nodesToDataframe\":true,\"edgesToDataframe\":true,\"options\":{\"width\":\"100%\",\"height\":\"100%\",\"nodes\":{\"shape\":\"icon\",\"font\":{\"size\":30},\"icon\":{\"code\":\"f1e3\",\"size\":75}},\"manipulation\":{\"enabled\":false},\"edges\":{\"color\":{\"color\":\"red\",\"hover\":\"green\",\"highlight\":\"black\"}},\"interaction\":{\"hover\":true,\"zoomSpeed\":1}},\"groups\":null,\"width\":null,\"height\":null,\"idselection\":{\"enabled\":false},\"byselection\":{\"enabled\":false},\"main\":null,\"submain\":null,\"footer\":null,\"background\":\"rgba(0, 0, 0, 0)\",\"tooltipStay\":300,\"tooltipStyle\":\"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);\",\"iconsRedraw\":true},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n## Your Assignments:\n\n### Make-1 : With a readymade dataset\n\nStep 0. Sine qua non! Fire up a New Project! Always!\\\nStep 1. Fire up a *new* Quarto document. Fill in the YAML header.\\\nStep 2. Take **any one** of the \"Make1-Datasets\" datasets described\nbelow.\\\nStep 3. Document contents:\n\n-   Introduce / Inspect in R your data and describe\n-   Introduce your Purpose\n-   Create graph objects\n-   Try different layouts\n-   Write comments in the code\n-   Write narrative in text with sections, bold ,italic etc.\n\nStep 4. Knit before you submit. Submit your entire project in a .zip file.\n\n### Make1 - Datasets:\n\n::: callout-note\n### Airline Data:\n\n{{< downloadthis \"data/AIRLINES-NODES.csv\" dname=\"airlines_nodes\" label=\"Airlines Nodes\" icon=\"database-fill-down\" type=\"info\" >}}\n\n{{< downloadthis \"data/AIRLINES-EDGES.csv\" dname=\"airlines_nodes\" label=\"Airlines Edges\" icon=\"database-fill-down\" type=\"info\" >}}\n\nStart with this bit of code in your second chunk, after `set up`\n\n\n::: {.cell layout-align=\"center\"}\n\n````{.cell-code}\n```{{r}}\n#| label: start up code for Airlines\n#| eval: false ## remove this!!\nairline_nodes <-\n  read_csv(\"./mydatafolder/AIRLINES-NODES.csv\") %>%\n  mutate(Id = Id + 1)\n\nairline_edges <-\n  read_csv(\"./mydatafolder/AIRLINES-EDGES.csv\") %>%\n  mutate(Source = Source + 1, Target = Target + 1)\n```\n````\n:::\n\n:::\n\n\n::: callout-note\n### The Famous Zachary Karate Club dataset\n\n- Start with pulling this data into your Quarto:\n\n\n::: {.cell layout-align=\"center\"}\n\n````{.cell-code}\n```{{r}}\n#| eval: false ## remove this!\ndata(\"karate\", package = \"igraphdata\")\nkarate\n```\n````\n:::\n\n-   Try `?karate` in the console\\\n-   Note that this is **not** a set of nodes, nor edges, **but** already\n    a **graph-object**!\\\n-   So no need to create a graph object using `tbl_graph`.\\\n-   You will need to just go ahead and plot using `ggraph`.\n:::\n\n::: callout-note\n### Game of Thrones:\n\n{{< downloadthis \"data/GoT.Rds\" dname=\"GoT\" label=\"GoT Networks\" icon=\"database-fill-down\" type=\"info\" >}}\n\n-   Start with pulling this data into your Rmarkdown:\n\n\n::: {.cell layout-align=\"center\"}\n\n````{.cell-code}\n```{{r}}\n#| label: start-up code for GoT\n#| eval: false ## remove this!!\n\nGoT <- read_rds(\"data/GoT.RDS\")\n```\n````\n:::\n\n\n-   Note that this is a **list** of **7** graphs from Game of Thrones.\n-   Select one using `GoT[[index]]` where index = 1...7 and then plot\n    directly.\n-   Try to access the nodes and edges and modify them using any\n    attribute data\n:::\n\n::: callout-note\n\n### Other Datasets\n\n- Choose any other graph dataset from `igraphdata`\\\n- (type `?igraphdata` in console)\\\n-   Ask me for help if you need any\\\n:::\n\n\n### Make-2: Literary Network with TV Show / Book / Story / Play\n\nYou need to create a Network Graph for your favourite **Book, play, TV\nserial or Show**. (E.g. Friends, BBT, or LB or HIMYM, B99, TGP, JTV...or\nHamlet, Little Women , Pride and Prejudice, or LoTR)\n\n- Step 1. Go to: [Literary\nNetworks](https://www.teachengineering.org/activities/view/uno_graphtheory_lesson01_activity2) for instructions.\\\n- Step 2. **Make your data** using the instructions.\\\n\n  -   In the nodes excel, use `id` and `names` as your columns. Any other\n    details in other columns to the right.\\\n  -   In your `edges` excel, use `from` and `to` as your first columns.\\\n  -   Entries in these columns can be `names` or `id`s but be consistent\n    and don't mix.\\\n\n- Step 3. Decide on 3 answers that you to seek and plan to make graphs\nfor.\\\n- Step 4. Create graph objects. Say 3 visualizations.\\\n- Step 5. Write comments/answers in the code and narrative text. Add\npictures from the web using Markdown syntax.\\\n- Step 6. Write Reflection ( ok, a short one!) *inside* your Quarto\ndocument. Make sure it renders !!\\\n- Step 7. Group Submission: Submit the render-able *.qmd file* **AND** the data. Quarto Markdown with joint authorship. Each person submits on\ntheir Assignments. All get the same grade on this one.\\\n\nAsk me for clarifications on what to do *after* you have read the\nInstructions in your group.\n\n\n## {{< iconify ooui references-rtl >}} References\n\n1. [Hadley Wickham](http://hadley.nz/), [Danielle\nNavarro](https://djnavarro.net/), and [Thomas Lin\nPedersen](https://www.data-imaginist.com/), *ggplot2: Elegant Graphics\nfor Data Analysis*. <https://ggplot2-book.org/networks>\\\n2. Omar Lizardo and Isaac Jilbert, *Social Networks: An Introduction*.\n<https://bookdown.org/omarlizardo/_main/>\\\n3. Mark Hoffman, *Methods for Network Analysis.*\n<https://bookdown.org/markhoff/social_network_analysis/>\\\n4. *Statistical Analysis of Network Data with R, 2nd\nEdition*.<https://github.com/kolaczyk/sand>\\\n5. [Thomas Lin Pedersen - 1 giraffe, 2 giraffe,GO!](https://www.data-imaginist.com/2019/1-giraffe-2-giraffe-go/)\\\n6. Tyner, Sam, François Briatte, and Heike Hofmann. 2017. \"Network\n    Visualization with ggplot2.\" The R Journal 9 (1): 27--59.\n    <https://journal.r-project.org/archive/2017/RJ-2017-023/index.html>\\\n7. Network Datasets <https://icon.colorado.edu/#!/networks>\\\n8. Yunran Chen, [Introduction to Network Analysis Using\n    R](https://yunranchen.github.io/intro-net-r/index.html)\\\n\n::: {#refs style=\"font-size: 60%;\"}\n###### {{< iconify lucide package-check >}} R Package Citations\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n\n\nPackage        Version   Citation                 \n-------------  --------  -------------------------\nggraph         2.2.1     @ggraph                  \nggtext         0.1.2     @ggtext                  \ngraphlayouts   1.2.2     @graphlayouts            \nigraph         2.1.4     @igraph2006; @igraph2025 \nigraphdata     1.0.1     @igraphdata              \nsand           2.0.0     @sand                    \nshowtext       0.9.7     @showtext                \ntidygraph      1.3.1     @tidygraph               \nvisNetwork     2.1.2     @visNetwork              \n\n\n:::\n:::\n\n    \n\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../../../../../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"../../../../../../../site_libs/vis-9.1.0/vis-network.min.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../../../site_libs/vis-9.1.0/vis-network.min.js\"></script>\n<script src=\"../../../../../../../site_libs/visNetwork-binding-2.1.2/visNetwork.js\"></script>\n<link href=\"../../../../../../../site_libs/font-awesome-4.7.0/css/font-awesome.min.css\" rel=\"stylesheet\" />\n<link href=\"../../../../../../../site_libs/ionicons-2.0.1/css/ionicons.min.css\" rel=\"stylesheet\" />\n<link href=\"../../../../../../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}