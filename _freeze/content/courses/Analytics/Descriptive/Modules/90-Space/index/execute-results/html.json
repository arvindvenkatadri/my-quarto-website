{
  "hash": "7336844b1157e1cce20be542cf3ed244",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: <iconify-icon icon=\"gis:proj-geo\" width=\"1.2em\" height=\"1.2em\"></iconify-icon> Space\nsubtitle: \"Maps, Cartograms, and Choropleths\"\nabstract: \"Geospatial Data and how to use it with intent\"\ndate: 15 Aug 2022\ndate-modified: \"2025-07-17\"\norder: 90\nimage: preview.jpg\nimage-alt: Photo by at infinity on Unsplash\n  \ncategories:\n- Spatial Data\n- Maps\n- Static\n- Interactive\n- Choropleth Maps\n- Bubble Plots\n- Cartograms\nbibliography: \n  - grateful-refs.bib\ncitation: true\n#suppress-bibliography: true\neditor: \n  markdown: \n    wrap: 72\n---\n\n## {{< fa folder-open >}} Slides and Tutorials\n\n|  |  |  |  |\n|------------------|------------------|------------------|-------------------|\n| **Spatial Data** | **Static Maps** | **Interactive Maps with Leaflet** | **Interactive Maps with Mapview** |\n| <a href=\"https://arvindvenkatadri.com/slides/R-for-Artists/06-spatial/06-Spatial-Data-in-R.html\"><iconify-icon icon=\"fa6-brands:r-project\" width=\"1.2em\" height=\"1.2em\"></iconify-icon>Spatial<br>Data </a> | <a href=\"../../../../../labs/r-labs/maps/gram-maps.qmd\"><iconify-icon icon=\"emojione:world-map\" width=\"1.2em\" height=\"1.2em\"></iconify-icon>Static<br>Maps</a>Â  | <a href=\"../../../../../labs/r-labs/maps/PlayingwithLeaflet.html\"> `<iconify-icon icon=\"`{=html}carbon:touch-interaction`\" width=\"1.2em\" height=\"1.2em\"></iconify-icon>`{=html}Interactive Maps<br>with leaflet</a> | <a href=\"../../../../../labs/r-labs/maps/PlayingwithMapview.html\"> `<iconify-icon icon=\"`{=html}carbon:touch-interaction`\" width=\"1.2em\" height=\"1.2em\"></iconify-icon>`{=html}Interactive Maps<br> with mapview</a> |\n\n:::: pa4\n::: {.athelas .ml0 .mt0 .pl4 .black-90 .bl .bw2 .b--blue}\n[\"If we were to wake up some morning and find that everyone was the same\nrace, creed, and color, we would find some other cause for prejudice by\nnoon.\"]{.f5 .f4-m .f3-l .lh-copy .measure .mt0}\n\n[--- George D. Aiken, US senator (20 Aug 1892-1984)]{.f6 .ttu .tracked\n.fs-normal}\n:::\n::::\n\n## {{< iconify noto-v1 package >}} Setting up R Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(tmap)\nlibrary(tmaptools)\n# install.packages(\"remotes\")\n# remotes::install_github(\"r-tmap/tmap.mapgl\")\nlibrary(tmap.mapgl) # Free mapgl maps\nlibrary(osmdata)\nlibrary(rnaturalearth)\n## Interactive Maps\nlibrary(leaflet)\nlibrary(leaflet.providers)\nlibrary(leaflet.extras)\n\n##\nlibrary(tidyplots) # Easily Produced Publication-Ready Plots\nlibrary(tinyplot) # Plots with Base R\nlibrary(tinytable) # Elegant Tables for our data\n```\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n#### Plot Fonts and Theme\n\n\n::: {.cell messages='false'}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(systemfonts)\nlibrary(showtext)\n## Clean the slate\nsystemfonts::clear_local_fonts()\nsystemfonts::clear_registry()\n##\nshowtext_opts(dpi = 96) # set DPI for showtext\nsysfonts::font_add(\n  family = \"Alegreya\",\n  regular = \"../../../../../../fonts/Alegreya-Regular.ttf\",\n  bold = \"../../../../../../fonts/Alegreya-Bold.ttf\",\n  italic = \"../../../../../../fonts/Alegreya-Italic.ttf\",\n  bolditalic = \"../../../../../../fonts/Alegreya-BoldItalic.ttf\"\n)\n\nsysfonts::font_add(\n  family = \"Roboto Condensed\",\n  regular = \"../../../../../../fonts/RobotoCondensed-Regular.ttf\",\n  bold = \"../../../../../../fonts/RobotoCondensed-Bold.ttf\",\n  italic = \"../../../../../../fonts/RobotoCondensed-Italic.ttf\",\n  bolditalic = \"../../../../../../fonts/RobotoCondensed-BoldItalic.ttf\"\n)\nshowtext_auto(enable = TRUE) # enable showtext\n##\ntheme_custom <- function() {\n  font <- \"Alegreya\" # assign font family up front\n\n  theme_classic(base_size = 14, base_family = font) %+replace% # replace elements we want to change\n\n    theme(\n      text = element_text(family = font), # set base font family\n\n      # text elements\n      plot.title = element_text( # title\n        family = font, # set font family\n        size = 24, # set font size\n        face = \"bold\", # bold typeface\n        hjust = 0, # left align\n        margin = margin(t = 5, r = 0, b = 5, l = 0)\n      ), # margin\n      plot.title.position = \"plot\",\n      plot.subtitle = element_text( # subtitle\n        family = font, # font family\n        size = 14, # font size\n        hjust = 0, # left align\n        margin = margin(t = 5, r = 0, b = 10, l = 0)\n      ), # margin\n\n      plot.caption = element_text( # caption\n        family = font, # font family\n        size = 9, # font size\n        hjust = 1\n      ), # right align\n\n      plot.caption.position = \"plot\", # right align\n\n      axis.title = element_text( # axis titles\n        family = \"Roboto Condensed\", # font family\n        size = 12\n      ), # font size\n\n      axis.text = element_text( # axis text\n        family = \"Roboto Condensed\", # font family\n        size = 9\n      ), # font size\n\n      axis.text.x = element_text( # margin for axis text\n        margin = margin(5, b = 10)\n      )\n\n      # since the legend often requires manual tweaking\n      # based on plot content, don't define it here\n    )\n}\n\n## Use available fonts in ggplot text geoms too!\nupdate_geom_defaults(geom = \"text\", new = list(\n  family = \"Roboto Condensed\",\n  face = \"plain\",\n  size = 3.5,\n  color = \"#2b2b2b\"\n))\n\n## Set the theme\ntheme_set(new = theme_custom())\n```\n:::\n\n\n\n## What graphs will we see today?\n\n| Variable #1 | Variable #2 | Chart Names | Chart Shape |\n|:----------------:|:----------------:|:----------------:|:------------------:|\n| Quant | Qual | Choropleth and Symbols Maps, Cartograms | {{< iconify arcticons emoji-world-map size=6x >}}{{\\< iconify gis statistic-map size=4x \\>}}{{< iconify icon-park-outline world size=4x >}} |\n\n## {{< iconify icons8 idea >}} Inspiration\n\n::: {#fig-choropleth-maps layout-ncol=\"2\" column=\"body-outset-right\"}\n![Infosys in the\nEU](../../../../../materials/images/Works-most-europe_Site.jpg){#fig-work-hours-eu}\n\n![Population\nCartogram](../../../../../materials/images/world-map-cartogram.png){#fig-cartogram\nwidth=\"4in\"}\n\nChoropleth and Cartogram\n:::\n\n::: {#fig-symbol-maps layout-ncol=\"2\"}\n![Where's the next Houthi\nattack?](../../../../../materials/images/hormuz.jpg){#fig-hormuz}\n\n![US\nCities](../../../../../materials/images/bubble-map.png){#fig-bubble}\n\nSymbol Maps\n:::\n\n## {{< iconify mdi food-processor-outline >}} How do these Chart(s) Work?\n\nIn @fig-work-hours-eu, we have a *choropleth map*. What does\n*choropleth*[^1] mean? And what kind of information could this map\nrepresent? The idea is to colour a specific area of the map, a district\nor state, based on a Quant or a Qual variable.\n\nThe @fig-cartogram deliberately distorts and scales portions of the map\nin proportion to a Quant variable, in this case, population in 2018.\n\nIn @fig-hormuz and @fig-bubble, symbols are used to indicate either the\nlocation/presence of an item of interest, or a quantity by scaling their\nsize in proportion to a Quant variable\n\n## {{< iconify openmoji japanese-symbol-for-beginner >}} Introduction\n\nFirst; let us watch a short, noisy video on maps: <br><br>\n\n{{< video https://youtu.be/YH2sAbXv7p4 >}}\n\n## {{< iconify fxemoji japanesesymbolforbeginner >}} What kind of visualizations will we make?\n\nLet us first understand the idea of a Geographical Information System,\nGIS: <br><br>\n\n{{< video https://youtu.be/aaghPefGD6Y >}}\n\nWe will first understand the structure of spatial data and where to find\nit. For now, we will deal with **vector** spatial data; the discussion\non **raster** data will be dealt with in another future module.\n\nWe will get hands-on with making maps, both static and interactive.\n\n### {{< iconify openmoji world-map >}} Choropleth Map\n\n<iframe width=\"100%\" height=\"645\" frameborder=\"0\" src=\"https://observablehq.com/embed/2930afc559123cab?cells=chart\">\n\n</iframe>\n\n### {{< iconify gis statistic-map >}} Bubble Map\n\nWhat information could this map below represent?\n\n<iframe width=\"100%\" height=\"805\" frameborder=\"0\" src=\"https://observablehq.com/embed/9e3c148cb813bfbc?cells=chart\">\n\n</iframe>\n\nLet us now look at the slides. Then we will understand how the R\npackages `sf`, `tmap` work to create maps, using data downloadable into\nR using `osmdata` ~~and `osmplotr`~~. We will also make interactive maps\nwith `leaflet` and `mapview`; `tmap` is also capable of creating\ninteractive maps.\n\n{{< revealjs https://arvindvenkatadri.com/slides/R-for-Artists/06-spatial/06-Spatial-Data-in-R.html >}}\n\n## {{< iconify icon-park me >}} Your Turn\n\n### {{< iconify cil animal >}} Animal and Bird Migration\n\n-   Head off to\n    [movebank.org](https://www.movebank.org/cms/movebank-main). Look at\n    a few species of interest and choose one.\n-   Download the data ( **ESRI Shapefile**). Note: You will get a .zip\n    file with a good many files in it. Save **all** of them, but read\n    only the `.shp` file into R.\n-   Import that into R using `sf_read()`\n-   See how you can plot locations, tracks and colour by\n    species....based on the data you download.\n-   For tutorial info: <https://movebankworkshopraleighnc.netlify.app/>\n\n### {{< iconify solar ufo-2-bold >}} UFO Sightings\n\nHere is a UFO Sighting dataset, containing location and text\ndescriptions.\n<https://github.com/planetsig/ufo-reports/blob/master/csv-data/ufo-scrubbed-geocoded-time-standardized.csv>\n\n### {{< iconify devicon kaggle >}} Sales Data from kaggle\n\nHead off to [Kaggle](https://www.kaggle.com/) and search for\n`Geographical Sales` related data. Make both static and interactive maps\nwith this data. Justify your decisions for type of map.\n\n## {{< iconify ooui references-ltr >}} References\n\n1.  Hadley Wickham, Danielle Navarro and Thomas Lin Pedersen. *ggplot2:\n    Elegant Graphics for Data Analysis*,\n    <https://ggplot2-book.org/maps.html>\n1. Martijn Tennekes and Jakub Nowosad (2025). *Elegant and informative maps with tmap*. <https://tmap.geocompx.org>\n2.  Robin Lovelace, Jakub Nowosad, Jannes Muenchow. *Geocomputation with\n    R*. <https://r.geocompx.org/>\\\n3.  Emine Fidan. *Guide to Creating Interactive Maps in R*,\n    <https://bookdown.org/eneminef/DRR_Bookdown/>\\\n4.  Nikita Voevodin. *R, Not the Best Practices*,\n    <https://bookdown.org/voevodin_nv/R_Not_the_Best_Practices/maps.html>\\\n5.  Want to make a cute logo-like map? Try\n    <https://prettymapp.streamlit.app>\\\n1. Free Map Tile services. <https://alexurquhart.github.io/free-tiles/>\n\n\n::: {#refs style=\"font-size: 60%;\"}\n###### {{< iconify lucide package-check >}} R Package Citations\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\nPackage         Version   Citation         \n--------------  --------  -----------------\nleaflet         2.2.2     @leaflet         \nosmdata         0.2.5     @osmdata         \nrnaturalearth   1.0.1     @rnaturalearth   \nsf              1.0.21    @sf2018; @sf2023 \ntmap            4.1       @tmap            \n\n\n:::\n:::\n\n:::\n\n[^1]: Etymology. **From Ancient Greek ÏÏÏÎ± (khá¹ra, \"location\") + ÏÎ»á¿Î¸Î¿Ï\n    (plÃªthos, \"a great number\") + English map**. First proposed in 1938\n    by American geographer John Kirtland Wright to mean \"quantity in\n    area,\" although maps of the type have been used since the early 19th\n    century.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../../../../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}